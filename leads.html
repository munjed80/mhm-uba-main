<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>UBA Leads</title>
    <link rel="stylesheet" href="assets/css/style.css" />
    <link rel="stylesheet" href="assets/css/enhanced-leads.css" />
    <link rel="stylesheet" href="assets/css/enhanced-leads.css" />
  </head>
  <body>
    <section id="uba-dashboard">
      <div id="page-id" data-page="leads-page">
        <div class="uba-shell">
          <aside class="uba-sidebar">
            <div>
              <div class="uba-logo">MHM <span>UBA</span></div>
              <p class="uba-tagline" data-i18n="app.tagline">
                Universal Business Automator ‚Äî one workspace for clients, tasks,
                invoices and smart tools.
              </p>
              <div class="uba-badge">
                <span class="uba-badge-dot"></span
                ><span data-i18n="app.badge"
                  >Private beta ¬∑ Built in the Netherlands</span
                >
              </div>
            </div>

            <div class="uba-language">
              <label for="language-select" data-i18n="language.label"
                >Language</label
              >
              <select id="language-select">
                <option value="en" data-i18n="language.en">English</option>
                <option value="ar" data-i18n="language.ar">Arabic</option>
                <option value="nl" data-i18n="language.nl">Dutch</option>
                <option value="fr" data-i18n="language.fr">French</option>
                <option value="es" data-i18n="language.es">Spanish</option>
                <option value="de" data-i18n="language.de">German</option>
              </select>
            </div>

            <div>
              <div class="uba-nav-label" data-i18n="nav.workspaceLabel">
                Workspace
              </div>
              <nav class="uba-nav">
                <a class="uba-nav-btn" href="index.html"
                  ><span class="icon">üìà</span
                  ><span data-i18n="nav.dashboard">Dashboard</span
                  ><small data-i18n="nav.dashboardSub">Overview</small></a
                >
                <a class="uba-nav-btn" href="clients.html"
                  ><span class="icon">üßë‚Äçüíª</span
                  ><span data-i18n="nav.clients">Clients</span
                  ><small data-i18n="nav.clientsSub">CRM</small></a
                >
                <a class="uba-nav-btn" href="projects.html"
                  ><span class="icon">üíº</span
                  ><span data-i18n="nav.projects">Projects</span
                  ><small data-i18n="nav.projectsSub">Pipeline</small></a
                >
                <a class="uba-nav-btn" href="tasks.html"
                  ><span class="icon">‚úÖ</span
                  ><span data-i18n="nav.tasks">Tasks</span
                  ><small data-i18n="nav.tasksSub">Today</small></a
                >
                <a class="uba-nav-btn" href="invoices.html"
                  ><span class="icon">üíµ</span
                  ><span data-i18n="nav.invoices">Invoices</span
                  ><small data-i18n="nav.invoicesSub">Billing</small></a
                >
                <a class="uba-nav-btn" href="automations.html"
                  ><span class="icon">ü§ñ</span
                  ><span data-i18n="nav.automations">Automations</span
                  ><small data-i18n="nav.automationsSub">Flows</small></a
                >
                <a class="uba-nav-btn" href="calendar.html"
                  ><span class="icon">
                    <svg viewBox="0 0 24 24"><path d="M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z"/></svg>
                  </span><span>Calendar</span></a
                >
                <a class="uba-nav-btn active" href="leads.html"
                  ><span class="icon">
                    <svg viewBox="0 0 24 24"><path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/></svg>
                  </span
                  ><span data-i18n="nav.leads">Leads</span
                  ><small data-i18n="nav.leadsSub">Pipeline</small></a
                >
                <a class="uba-nav-btn" href="expenses.html"
                  ><span class="icon">
                    <svg viewBox="0 0 24 24"><path d="M11.8 10.9c-2.27-.59-3-1.2-3-2.15 0-1.09 1.01-1.85 2.7-1.85 1.78 0 2.44.85 2.5 2.1h2.21c-.07-1.72-1.12-3.3-3.21-3.81V3h-3v2.16c-1.94.42-3.5 1.68-3.5 3.61 0 2.31 1.91 3.46 4.7 4.13 2.5.6 3 1.48 3 2.41 0 .69-.49 1.79-2.7 1.79-2.06 0-2.87-.92-2.98-2.1h-2.2c.12 2.19 1.76 3.42 3.68 3.83V21h3v-2.15c1.95-.37 3.5-1.5 3.5-3.55 0-2.84-2.43-3.81-4.7-4.4z"/></svg>
                  </span><span>Expenses</span></a
                >
                <a class="uba-nav-btn" href="files.html"
                  ><span class="icon">
                    <svg viewBox="0 0 24 24"><path d="M10 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2h-8l-2-2z"/></svg>
                  </span><span>Files</span></a
                >
                <a class="uba-nav-btn" href="reports.html"
                  ><span class="icon">
                    <svg viewBox="0 0 24 24"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"/></svg>
                  </span><span>Reports</span></a
                >
                <a class="uba-nav-btn" href="smart-tools.html"
                  ><span class="icon">
                    <svg viewBox="0 0 24 24"><path d="M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0l4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"/></svg>
                  </span
                  ><span data-i18n="nav.smartTools">UBA Smart Tools</span
                  ><small data-i18n="nav.smartToolsSub">AI ops</small></a
                >
                <a class="uba-nav-btn" href="insights.html"
                  ><span class="icon">
                    <svg viewBox="0 0 24 24"><path d="M3.5 18.49l6-6.01 4 4L22 6.92l-1.41-1.41-7.09 7.97-4-4L2 16.99z"/></svg>
                  </span
                  ><span data-i18n="nav.insights">Insights Lab</span
                  ><small data-i18n="nav.insightsSub">Reports</small></a
                >
                <a class="uba-nav-btn" href="help.html"
                  ><span class="icon">
                    <svg viewBox="0 0 24 24"><path d="M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM6 9h12v2H6V9zm8 5H6v-2h8v2zm4-6H6V6h12v2z"/></svg>
                  </span
                  ><span data-i18n="nav.support">Success Desk</span
                  ><small data-i18n="nav.supportSub">Guidance</small></a
                >
                <a class="uba-nav-btn" href="settings.html"
                  ><span class="icon">
                    <svg viewBox="0 0 24 24"><path d="M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"/></svg>
                  </span
                  ><span data-i18n="nav.settings">Settings</span
                  ><small data-i18n="nav.settingsSub">Workspace</small></a
                >
              </nav>
            </div>
            <div class="uba-sidebar-footer" data-i18n="sidebar.footer">
              Designed for small teams and solo founders who are tired of 7
              different tools just to run one business.
            </div>
          </aside>

          <main class="uba-main">
            <header class="uba-topbar">
              <div class="uba-top-left">
                <p class="uba-top-kicker">Sales</p>
                <h1 id="uba-view-title">Leads</h1>
                <p id="uba-view-desc">Sales pipeline and lead management.</p>
              </div>
              <div class="uba-top-right">
                <div class="uba-pill">
                  Total: <span id="leads-count">0</span>
                </div>
                <div style="margin-left: 8px">
                  Value: <strong id="leads-value">‚Ç¨0</strong>
                </div>
              </div>
            </header>

            <div class="uba-views">
              <section class="uba-view" data-view="leads">
                <div class="uba-grid">
                  <div class="uba-grid-col">
                    <section class="uba-card" id="leads-page">
                      <div class="uba-card-header">
                        <div>
                          <div class="uba-card-title" data-i18n="view.leads.title">
                            Leads
                          </div>
                          <p class="uba-card-sub" data-i18n="view.leads.desc">
                            Manage your sales pipeline and leads
                          </p>
                        </div>
                        <button id="new-lead-btn" class="uba-btn-primary">
                          <span data-i18n="leads.new">+ New Lead</span>
                        </button>
                      </div>

                      <div class="leads-meta">
                        <div>
                          <p class="label" data-i18n="leads.meta.count">
                            Total leads
                          </p>
                          <strong id="lead-count">0</strong>
                        </div>
                        <div>
                          <p class="label" data-i18n="leads.meta.value">
                            Pipeline value
                          </p>
                          <strong id="lead-value">‚Ç¨ 0</strong>
                        </div>
                        <div>
                          <p class="label" data-i18n="leads.meta.conversion">
                            Conversion rate
                          </p>
                          <strong id="lead-conversion">0%</strong>
                        </div>
                        <div class="mini-chip" data-i18n="view.leads.local">
                          Local only
                        </div>
                      </div>

                      <div class="uba-table-wrap">
                        <table class="uba-table">
                          <thead>
                            <tr>
                              <th data-i18n="table.name">Name</th>
                              <th data-i18n="table.company">Company</th>
                              <th data-i18n="table.email">Email</th>
                              <th data-i18n="leads.value">Value</th>
                              <th data-i18n="table.status">Status</th>
                              <th data-i18n="leads.source">Source</th>
                              <th style="width: 120px" data-i18n="table.actions">
                                Actions
                              </th>
                            </tr>
                          </thead>
                          <tbody id="leads-body">
                            <tr>
                              <td colspan="7" data-i18n="leads.empty">
                                No leads yet. Add your first lead.
                              </td>
                            </tr>
                          </tbody>
                        </table>
                      </div>
                    </section>
                  </div>
                </div>
              </section>
            </div>

            <!-- Lead Modal -->
            <div id="lead-modal" class="uba-modal" style="display: none;">
              <div class="uba-modal-backdrop" onclick="closeLeadModal()"></div>
              <div class="uba-modal-dialog">
                <div class="uba-modal-header">
                  <h3 id="lead-modal-title" data-i18n="leads.new">New Lead</h3>
                  <button class="uba-modal-close" onclick="closeLeadModal()">&times;</button>
                </div>
                <div class="uba-modal-body">
                  <form id="lead-form" class="uba-form">
                    <input type="hidden" id="lead-edit-id" />
                    
                    <div class="uba-form-row">
                      <div class="uba-form-group">
                        <label for="lead-name" data-i18n="table.name">Name</label>
                        <input
                          type="text"
                          id="lead-name"
                          class="uba-input"
                          placeholder="Lead name"
                          required
                        />
                      </div>
                      <div class="uba-form-group">
                        <label for="lead-company" data-i18n="table.company">Company</label>
                        <input
                          type="text"
                          id="lead-company"
                          class="uba-input"
                          placeholder="Company name"
                        />
                      </div>
                    </div>

                    <div class="uba-form-row">
                      <div class="uba-form-group">
                        <label for="lead-email" data-i18n="table.email">Email</label>
                        <input
                          type="email"
                          id="lead-email"
                          class="uba-input"
                          placeholder="email@example.com"
                        />
                      </div>
                      <div class="uba-form-group">
                        <label for="lead-phone" data-i18n="table.phone">Phone</label>
                        <input
                          type="tel"
                          id="lead-phone"
                          class="uba-input"
                          placeholder="Phone number"
                        />
                      </div>
                    </div>

                    <div class="uba-form-row">
                      <div class="uba-form-group">
                        <label for="lead-value" data-i18n="leads.value">Value (‚Ç¨)</label>
                        <input
                          type="number"
                          id="lead-value"
                          class="uba-input"
                          placeholder="0.00"
                          step="0.01"
                          min="0"
                        />
                      </div>
                      <div class="uba-form-group">
                        <label for="lead-status" data-i18n="table.status">Status</label>
                        <select id="lead-status" class="uba-select">
                          <option value="new" data-i18n="status.new">New</option>
                          <option value="contacted" data-i18n="status.contacted">Contacted</option>
                          <option value="qualified" data-i18n="status.qualified">Qualified</option>
                          <option value="proposal" data-i18n="status.proposal">Proposal</option>
                          <option value="won" data-i18n="status.won">Won</option>
                          <option value="lost" data-i18n="status.lost">Lost</option>
                        </select>
                      </div>
                    </div>

                    <div class="uba-form-row">
                      <div class="uba-form-group">
                        <label for="lead-source" data-i18n="leads.source">Source</label>
                        <select id="lead-source" class="uba-select">
                          <option value="website" data-i18n="source.website">Website</option>
                          <option value="referral" data-i18n="source.referral">Referral</option>
                          <option value="social" data-i18n="source.social">Social Media</option>
                          <option value="email" data-i18n="source.email">Email</option>
                          <option value="cold_call" data-i18n="source.coldCall">Cold Call</option>
                          <option value="event" data-i18n="source.event">Event</option>
                          <option value="other" data-i18n="source.other">Other</option>
                        </select>
                      </div>
                      <div class="uba-form-group">
                        <label for="lead-priority" data-i18n="table.priority">Priority</label>
                        <select id="lead-priority" class="uba-select">
                          <option value="low" data-i18n="priority.low">Low</option>
                          <option value="medium" data-i18n="priority.medium">Medium</option>
                          <option value="high" data-i18n="priority.high">High</option>
                        </select>
                      </div>
                    </div>

                    <div class="uba-form-group">
                      <label for="lead-notes" data-i18n="form.notes">Notes</label>
                      <textarea
                        id="lead-notes"
                        class="uba-textarea"
                        placeholder="Additional notes about this lead"
                        rows="3"
                      ></textarea>
                    </div>

                    <div id="lead-error" class="uba-error-message" style="display: none;"></div>
                  </form>
                </div>
                <div class="uba-modal-footer">
                  <button type="button" class="uba-btn-ghost" onclick="closeLeadModal()">
                    <span data-i18n="action.cancel">Cancel</span>
                  </button>
                  <button type="button" id="save-lead-btn" class="uba-btn-primary">
                    <span data-i18n="action.save">Save Lead</span>
                  </button>
                </div>
              </div>
            </div>
          </main>
        </div>
      </div>
    </section>

    
    <!-- Supabase CDN -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    
    <!-- Supabase Config (if exists) -->
    <script>
      // Try to load config, fail silently if not found
      const script = document.createElement('script');
      script.src = 'supabase-config.js';
      script.onerror = () => console.warn('[Auth] supabase-config.js not found - running in local/demo mode');
      document.head.appendChild(script);
    </script>
    
    <!-- Supabase API Service -->
    <script src="assets/js/supabase-api-service.js"></script>
    
    <!-- Auth Guard (protect this page) -->
    <script src="assets/js/auth-guard.js"></script>
    
    <script src="assets/js/i18n.js"></script>
    <script src="assets/js/store.js"></script>
    <script src="assets/js/data-layer.js"></script>
    <script src="assets/js/notifications.js"></script>
    <script src="assets/js/search.js"></script>
    <script src="assets/js/leads.js"></script>
    <script src="assets/js/enhanced-leads.js"></script>
    <script src="assets/js/app.js"></script>
    <script src="assets/js/page-loader.js"></script>
  </body>
</html>
