<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>UBA Projects</title>
  <link rel="stylesheet" href="assets/css/style.css" />
</head>
<body>
  <section id="uba-dashboard">
    <div id="page-id" data-page="projects-page">
      <div class="uba-shell">
        <aside class="uba-sidebar">
        <div>
          <div class="uba-logo">
            MHM <span>UBA</span>
          </div>
          <p class="uba-tagline" data-i18n="app.tagline">
            Universal Business Automator â€” one workspace for clients, tasks, invoices and smart tools.
          </p>
          <div class="uba-badge">
            <span class="uba-badge-dot"></span>
            <span data-i18n="app.badge">Private beta Â· Built in the Netherlands</span>
          </div>
        </div>

        <div class="uba-language">
          <label for="language-select" data-i18n="language.label">Language</label>
          <select id="language-select">
            <option value="en" data-i18n="language.en">English</option>
            <option value="ar" data-i18n="language.ar">Arabic</option>
            <option value="nl" data-i18n="language.nl">Dutch</option>
            <option value="fr" data-i18n="language.fr">French</option>
            <option value="es" data-i18n="language.es">Spanish</option>
            <option value="de" data-i18n="language.de">German</option>
          </select>
        </div>

        <div>
          <div class="uba-nav-label" data-i18n="nav.workspaceLabel">Workspace</div>
          <nav class="uba-nav">
            <a class="uba-nav-btn" href="index.html">
              <span class="icon">ğŸ“ˆ</span>
              <span data-i18n="nav.dashboard">Dashboard</span>
              <small data-i18n="nav.dashboardSub">Overview</small>
            </a>
            <a class="uba-nav-btn" href="clients.html">
              <span class="icon">ğŸ§‘â€ğŸ’»</span>
              <span data-i18n="nav.clients">Clients</span>
              <small data-i18n="nav.clientsSub">CRM</small>
            </a>
            <a class="uba-nav-btn active" href="projects.html">
              <span class="icon">ğŸ’¼</span>
              <span data-i18n="nav.projects">Projects</span>
              <small data-i18n="nav.projectsSub">Pipeline</small>
            </a>
            <a class="uba-nav-btn" href="tasks.html">
              <span class="icon">âœ…</span>
              <span data-i18n="nav.tasks">Tasks</span>
              <small data-i18n="nav.tasksSub">Today</small>
            </a>
            <a class="uba-nav-btn" href="invoices.html">
              <span class="icon">ğŸ’µ</span>
              <span data-i18n="nav.invoices">Invoices</span>
              <small data-i18n="nav.invoicesSub">Billing</small>
            </a>
            <a class="uba-nav-btn" href="automations.html">
              <span class="icon">ğŸ¤–</span>
              <span data-i18n="nav.automations">Automations</span>
              <small data-i18n="nav.automationsSub">Flows</small>
            </a>
            <a class="uba-nav-btn" href="calendar.html">
              <span class="icon">ğŸ“…</span>
              <span>Calendar</span>
            </a>
            <a class="uba-nav-btn" href="leads.html">
              <span class="icon">ğŸ§²</span>
              <span>Leads</span>
            </a>
            <a class="uba-nav-btn" href="expenses.html">
              <span class="icon">ğŸ“¤</span>
              <span>Expenses</span>
            </a>
            <a class="uba-nav-btn" href="files.html">
              <span class="icon">ğŸ“</span>
              <span>Files</span>
            </a>
            <a class="uba-nav-btn" href="reports.html">
              <span class="icon">ğŸ“‘</span>
              <span>Reports</span>
            </a>
            <a class="uba-nav-btn" href="smart-tools.html">
              <span class="icon">ğŸ§ </span>
              <span data-i18n="nav.smartTools">UBA Smart Tools</span>
              <small data-i18n="nav.smartToolsSub">AI ops</small>
            </a>
            <a class="uba-nav-btn" href="insights.html">
              <span class="icon">ğŸ“Š</span>
              <span data-i18n="nav.insights">Insights Lab</span>
              <small data-i18n="nav.insightsSub">Reports</small>
            </a>
            <a class="uba-nav-btn" href="help.html">
              <span class="icon">ğŸ’¬</span>
              <span data-i18n="nav.support">Success Desk</span>
              <small data-i18n="nav.supportSub">Guidance</small>
            </a>
            <a class="uba-nav-btn" href="settings.html">
              <span class="icon">ğŸ› ï¸</span>
              <span data-i18n="nav.settings">Settings</span>
              <small data-i18n="nav.settingsSub">Workspace</small>
            </a>
          </nav>
        </div>

        <div class="uba-sidebar-footer" data-i18n="sidebar.footer">
          Designed for small teams and solo founders who are tired of 7 different tools just to run one business.
        </div>
        </aside>

        <main class="uba-main">
        <header class="uba-topbar">
          <div class="uba-top-left">
            <p class="uba-top-kicker" data-i18n="view.projects.kicker">Pipeline flow</p>
            <h1 id="uba-view-title" data-i18n="view.projects.title">Projects</h1>
            <p id="uba-view-desc" data-i18n="view.projects.desc">Pipeline view of active work, staged locally.</p>
          </div>
          <div class="uba-top-right">
            <select id="workspace-select" class="uba-select"><option>Main workspace</option></select>
            <button id="add-project-btn" class="uba-btn-primary" style="margin-left:8px;" data-i18n="projects.add">Add project</button>
            <div class="uba-user-pill"><span class="uba-avatar"></span><span id="uba-user-label">Admin</span></div>
          </div>
        </header>

        <div class="uba-views">
          <section class="uba-view" data-view="projects">
            <div class="uba-grid" style="grid-template-columns: repeat(1,1fr); gap:12px;">
              <div class="uba-card">
                <div class="uba-card-header"><div><div class="uba-card-title">Pipeline stages</div><p class="uba-card-sub">Leads â†’ In progress â†’ Ongoing â†’ Completed</p></div></div>
                <div class="uba-pipeline" style="margin-top:8px;">
                  <div class="uba-pipe-col">
                    <h4>Leads</h4>
                    <div class="col-body" id="projects-leads">
                      <!-- Real project cards will be rendered here by JS -->
                    </div>
                  </div>
                  <div class="uba-pipe-col">
                    <h4>In progress</h4>
                    <div class="col-body" id="projects-inprogress">
                      <!-- Real project cards will be rendered here by JS -->
                    </div>
                  </div>
                  <div class="uba-pipe-col">
                    <h4>Ongoing</h4>
                    <div class="col-body" id="projects-ongoing">
                      <!-- Real project cards will be rendered here by JS -->
                    </div>
                  </div>
                  <div class="uba-pipe-col">
                    <h4>Completed</h4>
                    <div class="col-body" id="projects-completed">
                      <!-- Real project cards will be rendered here by JS -->
                    </div>
                  </div>
                </div>
              </div>

              <div class="uba-card"><div class="uba-card-header"><div><div class="uba-card-title">Project details</div><p class="uba-card-sub">Select a project to see details</p></div></div><div style="padding:12px;" id="project-detail-drawer">No project selected.</div></div>
            </div>
          </section>
        </div>
        </main>
      </div>
    </div>
  </section>

  <!-- Project form modal (hidden by default) -->
  <div id="project-form-modal" class="uba-modal is-hidden" role="dialog" aria-hidden="true" style="position:fixed;left:0;right:0;top:0;bottom:0;display:flex;align-items:center;justify-content:center;padding:20px;z-index:60;">
    <div class="uba-card" style="width:100%;max-width:520px;">
      <div class="uba-card-header"><div><div class="uba-card-title" data-i18n="projects.modal.title">Project</div><div class="uba-card-sub" data-i18n="projects.modal.sub">Create or edit a project</div></div><div><button id="project-form-close" class="uba-btn-ghost" aria-label="Close">âœ•</button></div></div>
      <div style="padding:12px;">
        <form id="project-form">
          <input type="hidden" id="project-id" />
          <div style="display:flex;gap:8px;margin-bottom:8px;">
            <input id="project-title" placeholder="Project title" style="flex:1;" required data-i18n-placeholder="projects.form.titlePlaceholder" />
            <input id="project-client" placeholder="Client" style="width:180px;" data-i18n-placeholder="projects.form.clientPlaceholder" />
          </div>
          <div style="display:flex;gap:8px;align-items:center;margin-bottom:8px;">
            <input id="project-budget" type="number" placeholder="Budget" style="width:140px;" data-i18n-placeholder="projects.form.budgetPlaceholder" />
            <select id="project-stage">
              <option value="leads">Leads</option>
              <option value="in_progress">In progress</option>
              <option value="ongoing">Ongoing</option>
              <option value="completed">Completed</option>
            </select>
          </div>
          <div style="margin-bottom:8px;"><textarea id="project-notes" placeholder="Notes (optional)" style="width:100%;min-height:80px;" data-i18n-placeholder="projects.form.notesPlaceholder"></textarea></div>
          <div style="display:flex;gap:8px;justify-content:flex-end;">
            <button type="button" id="project-cancel" class="uba-btn-ghost" data-i18n="projects.form.cancel">Cancel</button>
            <button type="submit" id="project-save" class="uba-btn-primary" data-i18n="projects.form.save">Save</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <script src="assets/js/i18n.js"></script>
  <script src="assets/js/store.js"></script>
  <script src="assets/js/app.js"></script>
  <script src="assets/js/projects.js"></script>
  <script src="assets/js/page-loader.js"></script>
  <script src="assets/js/clients.js"></script>
  <script src="assets/js/tasks.js"></script>
  <script src="assets/js/smarttools.js"></script>
  <script src="assets/js/assistant.js"></script>
  <script>
    (function(){
      const lang = localStorage.getItem('uba-lang') || 'en';
      if (window.ubaI18n && typeof window.ubaI18n.applyTranslations === 'function') {
        window.ubaI18n.applyTranslations(lang);
      }
      if (lang === 'ar') document.documentElement.dir = 'rtl';
    })();
  </script>
  <script>
    const pageId = document.getElementById("page-id")?.dataset?.page;
    if (pageId && typeof loadPageScripts === 'function') {
      try {
        loadPageScripts(pageId);
      } catch (err) {
        console.warn('page-loader: failed to run loadPageScripts', err);
      }
    }
  </script>
</body>
</html>