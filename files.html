<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>UBA Files</title>
  <link rel="stylesheet" href="assets/css/style.css" />
</head>
<body>
  <section id="uba-dashboard">
    <div class="uba-shell">
      <aside class="uba-sidebar">
        <div>
          <div class="uba-logo">MHM <span>UBA</span></div>
          <p class="uba-tagline" data-i18n="app.tagline">Universal Business Automator â€” one workspace for clients, tasks, invoices and smart tools.</p>
          <div class="uba-badge"><span class="uba-badge-dot"></span><span data-i18n="app.badge">Private beta Â· Built in the Netherlands</span></div>
        </div>

        <div class="uba-language">
          <label for="language-select" data-i18n="language.label">Language</label>
          <select id="language-select">
            <option value="en" data-i18n="language.en">English</option>
            <option value="ar" data-i18n="language.ar">Arabic</option>
            <option value="nl" data-i18n="language.nl">Dutch</option>
            <option value="fr" data-i18n="language.fr">French</option>
            <option value="es" data-i18n="language.es">Spanish</option>
            <option value="de" data-i18n="language.de">German</option>
          </select>
        </div>

        <div>
          <div class="uba-nav-label" data-i18n="nav.workspaceLabel">Workspace</div>
          <nav class="uba-nav">
            <a class="uba-nav-btn" href="index.html"><span class="icon">ğŸ“ˆ</span><span data-i18n="nav.dashboard">Dashboard</span><small data-i18n="nav.dashboardSub">Overview</small></a>
            <a class="uba-nav-btn" href="clients.html"><span class="icon">ğŸ§‘â€ğŸ’»</span><span data-i18n="nav.clients">Clients</span><small data-i18n="nav.clientsSub">CRM</small></a>
            <a class="uba-nav-btn" href="projects.html"><span class="icon">ğŸ’¼</span><span data-i18n="nav.projects">Projects</span><small data-i18n="nav.projectsSub">Pipeline</small></a>
            <a class="uba-nav-btn" href="tasks.html"><span class="icon">âœ…</span><span data-i18n="nav.tasks">Tasks</span><small data-i18n="nav.tasksSub">Today</small></a>
            <a class="uba-nav-btn" href="invoices.html"><span class="icon">ğŸ’µ</span><span data-i18n="nav.invoices">Invoices</span><small data-i18n="nav.invoicesSub">Billing</small></a>
            <a class="uba-nav-btn" href="automations.html"><span class="icon">ğŸ¤–</span><span data-i18n="nav.automations">Automations</span><small data-i18n="nav.automationsSub">Flows</small></a>
            <a class="uba-nav-btn" href="calendar.html"><span class="icon">ğŸ“…</span><span>Calendar</span></a>
            <a class="uba-nav-btn" href="leads.html"><span class="icon">ğŸ§²</span><span>Leads</span></a>
            <a class="uba-nav-btn" href="expenses.html"><span class="icon">ğŸ“¤</span><span>Expenses</span></a>
            <a class="uba-nav-btn active" href="files.html"><span class="icon">ğŸ“</span><span>Files</span></a>
            <a class="uba-nav-btn" href="reports.html"><span class="icon">ğŸ“‘</span><span>Reports</span></a>
            <a class="uba-nav-btn" href="smart-tools.html"><span class="icon">ğŸ§ </span><span data-i18n="nav.smartTools">UBA Smart Tools</span><small data-i18n="nav.smartToolsSub">AI ops</small></a>
            <a class="uba-nav-btn" href="insights.html"><span class="icon">ğŸ“Š</span><span data-i18n="nav.insights">Insights Lab</span><small data-i18n="nav.insightsSub">Reports</small></a>
            <a class="uba-nav-btn" href="help.html"><span class="icon">ğŸ’¬</span><span data-i18n="nav.support">Success Desk</span><small data-i18n="nav.supportSub">Guidance</small></a>
            <a class="uba-nav-btn" href="settings.html"><span class="icon">ğŸ› ï¸</span><span data-i18n="nav.settings">Settings</span><small data-i18n="nav.settingsSub">Workspace</small></a>
          </nav>
        </div>
        <div class="uba-sidebar-footer" data-i18n="sidebar.footer">Designed for small teams and solo founders who are tired of 7 different tools just to run one business.</div>
      </aside>

      <main class="uba-main">
        <header class="uba-topbar">
          <div class="uba-top-left">
            <p class="uba-top-kicker">Files</p>
            <h1 id="uba-view-title">Files</h1>
            <p id="uba-view-desc">File manager (UI only)</p>
          </div>
          <div class="uba-top-right">
            <div class="uba-pill">Quick filters</div>
          </div>
        </header>

        <div class="uba-views">
          <section class="uba-view" data-view="files">
            <div class="uba-card">
              <div class="uba-card-header">
                <div>
                  <div class="uba-card-title">Files</div>
                  <p class="uba-card-sub">Grouped by client or project</p>
                </div>
              </div>

              <div style="padding:12px;">
                <div style="margin-bottom:10px;display:flex;gap:8px;">
                  <button class="uba-pill" data-filter="all">All</button>
                  <button class="uba-pill" data-filter="clients">Clients</button>
                  <button class="uba-pill" data-filter="projects">Projects</button>
                </div>

                <div class="uba-table-wrap">
                  <table class="uba-table">
                    <thead>
                      <tr><th>File name</th><th>Type</th><th>Linked to</th><th>Last updated</th></tr>
                    </thead>
                    <tbody id="files-body"></tbody>
                  </table>
                </div>
              </div>
            </div>
          </section>
        </div>
      </main>
    </div>
  </section>

  <script src="assets/js/i18n.js"></script>
  <script src="assets/js/store.js"></script>
  <script>
    (function(){
      const store = window.ubaStore;
      const render = () => {
        const files = (store && store.files.getAll()) || window.ubaFiles || [];
        const body = document.getElementById('files-body'); body.innerHTML = '';
        files.forEach(f=>{
          const tr = document.createElement('tr');
          tr.innerHTML = `<td>${f.name}</td><td>${f.type}</td><td>${f.linked}</td><td>${f.updated}</td>`;
          const edit = document.createElement('button'); edit.type='button'; edit.className='uba-btn-link'; edit.textContent='Edit';
          edit.addEventListener('click', ()=>{
            const name = prompt('File name', f.name)||f.name;
            const type = prompt('Type', f.type)||f.type;
            const linked = prompt('Linked to', f.linked)||f.linked;
            const updated = prompt('Updated (YYYY-MM-DD)', f.updated)||f.updated;
            if (store && store.files) store.files.update(f.id, { name, type, linked, updated }); render();
          });
          const del = document.createElement('button'); del.type='button'; del.className='uba-btn-link'; del.textContent='Delete';
          del.addEventListener('click', ()=>{ if(!confirm('Delete file?')) return; if(store && store.files) store.files.delete(f.id); render(); });
          const tdActions = document.createElement('td'); tdActions.appendChild(edit); tdActions.appendChild(del);
          tr.appendChild(tdActions);
          body.appendChild(tr);
        });
      };

      // insert add row controls
      const header = document.querySelector('.uba-card-header');
      if (header) {
        const bar = document.createElement('div'); bar.style.display='flex'; bar.style.gap='8px'; bar.style.marginTop='8px';
        bar.innerHTML = `<input id="file-name" placeholder="File name" style="flex:1;"/><input id="file-type" placeholder="Type" style="width:120px;"/><input id="file-linked" placeholder="Linked to" style="width:160px;"/><input id="file-updated" type="date" style="width:140px;"/><button id="file-add" class="uba-btn-primary">Add</button>`;
        header.appendChild(bar);
        document.getElementById('file-add').addEventListener('click', ()=>{
          const name = document.getElementById('file-name').value.trim(); if(!name){alert('Name required');return;}
          const type = document.getElementById('file-type').value.trim()||'File';
          const linked = document.getElementById('file-linked').value.trim()||'';
          const updated = document.getElementById('file-updated').value || new Date().toISOString().slice(0,10);
          if (store && store.files) store.files.create({ name, type, linked, updated }); render();
          document.getElementById('file-name').value=''; document.getElementById('file-type').value=''; document.getElementById('file-linked').value=''; document.getElementById('file-updated').value='';
        });
      }

      render();
      if (window.ubaI18n && window.ubaI18n.applyTranslations) window.ubaI18n.applyTranslations(localStorage.getItem('uba-lang')||'en');
    })();
  </script>
</body>
</html>