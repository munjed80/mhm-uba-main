<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>UBA Settings</title>
    <link rel="stylesheet" href="assets/css/style.css" />
    <style>
      /* Settings UI Styles */
      .workspace-items {
        display: flex;
        flex-direction: column;
        gap: 12px;
      }

      .workspace-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 16px;
        background: var(--panel);
        border: 1px solid var(--border);
        border-radius: 8px;
        transition: all 0.2s ease;
      }

      .workspace-item:hover {
        border-color: var(--accent);
        background: var(--surface);
      }

      .workspace-item.active {
        border-color: var(--accent);
        background: rgba(34, 211, 238, 0.1);
      }

      .workspace-info {
        flex: 1;
      }

      .workspace-name {
        font-size: 15px;
        font-weight: 500;
        color: var(--text);
        margin-bottom: 4px;
      }

      .workspace-meta {
        display: flex;
        gap: 8px;
        align-items: center;
      }

      .workspace-badge {
        font-size: 11px;
        padding: 2px 8px;
        background: var(--accent);
        color: var(--bg);
        border-radius: 4px;
        font-weight: 500;
      }

      .workspace-plan {
        font-size: 11px;
        padding: 2px 8px;
        background: var(--border);
        color: var(--muted);
        border-radius: 4px;
        text-transform: uppercase;
      }

      .workspace-actions {
        display: flex;
        gap: 8px;
      }

      .uba-status-success {
        color: var(--good);
        background: rgba(34, 197, 94, 0.1);
        padding: 12px;
        border-radius: 6px;
        font-size: 14px;
      }

      .uba-status-error {
        color: var(--bad);
        background: rgba(239, 68, 68, 0.1);
        padding: 12px;
        border-radius: 6px;
        font-size: 14px;
      }

      #settings-status {
        display: none;
        margin-top: 12px;
      }

      .uba-settings-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 16px;
      }

      @media (max-width: 768px) {
        .uba-settings-grid {
          grid-template-columns: 1fr;
        }
      }

      .uba-settings-field {
        margin-bottom: 16px;
      }

      .uba-settings-field label {
        display: block;
        margin-bottom: 8px;
        font-size: 13px;
        font-weight: 500;
        color: var(--text);
      }

      .uba-settings-toggles {
        display: flex;
        flex-direction: column;
        gap: 16px;
      }

      .uba-setting-item {
        display: flex;
        align-items: flex-start;
        gap: 12px;
        cursor: pointer;
      }

      .uba-setting-item input[type="checkbox"] {
        margin-top: 2px;
      }

      .uba-setting-info {
        flex: 1;
      }

      .uba-setting-label {
        display: block;
        font-size: 14px;
        font-weight: 500;
        color: var(--text);
        margin-bottom: 4px;
      }

      .uba-setting-help {
        display: block;
        font-size: 12px;
        color: var(--muted);
      }

      .uba-settings-actions {
        display: flex;
        gap: 12px;
        flex-wrap: wrap;
      }

      .uba-settings-header {
        margin-bottom: 20px;
      }

      .uba-settings-title {
        display: flex;
        align-items: center;
        gap: 8px;
        font-size: 18px;
        font-weight: 600;
        color: var(--text);
        margin: 0 0 8px 0;
      }

      .uba-settings-icon {
        font-size: 22px;
      }

      .uba-settings-desc {
        font-size: 13px;
        color: var(--muted);
        margin: 0;
      }

      /* Members UI Styles */
      .member-items {
        display: flex;
        flex-direction: column;
        gap: 12px;
      }

      .member-item {
        display: flex;
        align-items: center;
        gap: 16px;
        padding: 16px;
        background: var(--panel);
        border: 1px solid var(--border);
        border-radius: 8px;
        transition: all 0.2s ease;
      }

      .member-item:hover {
        border-color: var(--accent);
        background: var(--surface);
      }

      .member-item.pending {
        opacity: 0.7;
        border-style: dashed;
      }

      .member-avatar {
        width: 48px;
        height: 48px;
        border-radius: 50%;
        background: linear-gradient(135deg, var(--accent), var(--accent-2));
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 20px;
        font-weight: 600;
        color: var(--bg);
        flex-shrink: 0;
      }

      .member-info {
        flex: 1;
        min-width: 0;
      }

      .member-name {
        font-size: 15px;
        font-weight: 500;
        color: var(--text);
        margin-bottom: 4px;
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .member-email {
        font-size: 13px;
        color: var(--muted);
        margin-bottom: 6px;
      }

      .member-meta {
        display: flex;
        gap: 8px;
        align-items: center;
        flex-wrap: wrap;
      }

      .member-role-badge {
        font-size: 11px;
        padding: 2px 8px;
        border-radius: 4px;
        font-weight: 500;
        text-transform: uppercase;
      }

      .member-role-badge.role-owner {
        background: linear-gradient(135deg, #f59e0b, #f97316);
        color: var(--bg);
      }

      .member-role-badge.role-admin {
        background: linear-gradient(135deg, #8b5cf6, #a855f7);
        color: var(--bg);
      }

      .member-role-badge.role-editor {
        background: linear-gradient(135deg, #3b82f6, #22d3ee);
        color: var(--bg);
      }

      .member-role-badge.role-viewer {
        background: var(--border);
        color: var(--muted);
      }

      .member-badge-you {
        font-size: 10px;
        padding: 2px 6px;
        background: var(--good);
        color: var(--bg);
        border-radius: 4px;
        font-weight: 600;
      }

      .member-status-badge {
        font-size: 10px;
        padding: 2px 6px;
        background: var(--warn);
        color: var(--bg);
        border-radius: 4px;
        font-weight: 500;
      }

      .member-joined {
        font-size: 11px;
        color: var(--muted);
      }

      .member-actions {
        display: flex;
        gap: 8px;
        align-items: center;
        flex-shrink: 0;
      }

      .member-role-select {
        padding: 6px 10px;
        background: var(--panel);
        border: 1px solid var(--border);
        border-radius: 6px;
        color: var(--text);
        font-size: 13px;
        cursor: pointer;
      }

      .member-role-display {
        font-size: 13px;
        color: var(--muted);
        padding: 6px 10px;
      }

      .member-remove-btn {
        color: var(--bad) !important;
      }

      .member-remove-btn:hover {
        background: rgba(239, 68, 68, 0.1) !important;
      }

      .member-invite-form {
        border: 1px solid var(--border);
      }

      @media (max-width: 768px) {
        .member-item {
          flex-direction: column;
          align-items: flex-start;
        }

        .member-actions {
          width: 100%;
          justify-content: space-between;
        }
      }

      /* Billing Styles */
      .billing-current-plan {
        background: var(--panel);
        border: 1px solid var(--border);
        border-radius: 8px;
        padding: 20px;
        margin-bottom: 24px;
      }

      .billing-plan-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 16px;
      }

      .billing-plan-header h4 {
        font-size: 20px;
        font-weight: 600;
        color: var(--text);
        margin: 0 0 4px 0;
      }

      .billing-plan-desc {
        font-size: 14px;
        color: var(--muted);
        margin: 0;
      }

      .billing-plan-price {
        text-align: right;
      }

      .billing-price-amount {
        font-size: 32px;
        font-weight: 700;
        color: var(--text);
      }

      .billing-price-period {
        font-size: 16px;
        color: var(--muted);
      }

      .billing-price-free {
        font-size: 24px;
        font-weight: 600;
        color: var(--good);
      }

      .billing-trial-banner,
      .billing-cancel-banner {
        display: flex;
        align-items: center;
        gap: 12px;
        padding: 12px 16px;
        border-radius: 6px;
        margin-bottom: 16px;
      }

      .billing-trial-banner {
        background: rgba(34, 211, 238, 0.1);
        border: 1px solid var(--accent);
      }

      .billing-cancel-banner {
        background: rgba(251, 191, 36, 0.1);
        border: 1px solid var(--warn);
      }

      .billing-trial-icon,
      .billing-cancel-icon {
        font-size: 24px;
      }

      .billing-trial-banner strong,
      .billing-cancel-banner strong {
        color: var(--text);
        display: block;
        margin-bottom: 2px;
      }

      .billing-trial-banner p,
      .billing-cancel-banner p {
        font-size: 13px;
        color: var(--muted);
        margin: 0;
      }

      .billing-info-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
        gap: 16px;
      }

      .billing-info-item {
        display: flex;
        flex-direction: column;
        gap: 4px;
      }

      .billing-info-label {
        font-size: 12px;
        color: var(--muted);
        text-transform: uppercase;
        letter-spacing: 0.5px;
      }

      .billing-info-value {
        font-size: 15px;
        font-weight: 500;
        color: var(--text);
      }

      .billing-status-active {
        color: var(--good);
      }

      .billing-status-trialing {
        color: var(--accent);
      }

      .billing-status-past_due {
        color: var(--warn);
      }

      .billing-status-canceled {
        color: var(--bad);
      }

      /* Usage Section */
      .billing-usage-section {
        margin-bottom: 32px;
      }

      .billing-usage-section h4 {
        font-size: 18px;
        font-weight: 600;
        color: var(--text);
        margin: 0 0 16px 0;
      }

      .billing-usage-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 16px;
      }

      .billing-usage-item {
        background: var(--panel);
        border: 1px solid var(--border);
        border-radius: 6px;
        padding: 12px;
      }

      .billing-usage-item.near-limit {
        border-color: var(--warn);
        background: rgba(251, 191, 36, 0.05);
      }

      .billing-usage-label {
        font-size: 13px;
        color: var(--text);
        font-weight: 500;
        margin-bottom: 8px;
      }

      .billing-usage-bar {
        height: 6px;
        background: var(--surface);
        border-radius: 3px;
        overflow: hidden;
        margin-bottom: 6px;
      }

      .billing-usage-fill {
        height: 100%;
        background: linear-gradient(90deg, var(--accent), var(--accent-2));
        transition: width 0.3s ease;
      }

      .billing-usage-item.near-limit .billing-usage-fill {
        background: linear-gradient(90deg, var(--warn), #ef4444);
      }

      .billing-usage-stats {
        display: flex;
        justify-content: space-between;
        font-size: 13px;
      }

      .billing-usage-stats span:first-child {
        color: var(--text);
        font-weight: 500;
      }

      .billing-usage-limit {
        color: var(--muted);
      }

      /* Plans Section */
      .billing-plans-section {
        margin-bottom: 32px;
      }

      .billing-plans-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
      }

      .billing-plans-header h4 {
        font-size: 18px;
        font-weight: 600;
        color: var(--text);
        margin: 0;
      }

      .billing-period-toggle {
        display: flex;
        gap: 8px;
        background: var(--surface);
        border-radius: 6px;
        padding: 4px;
      }

      .billing-toggle-label {
        position: relative;
        cursor: pointer;
        display: flex;
        align-items: center;
        gap: 4px;
        padding: 6px 12px;
        border-radius: 4px;
        font-size: 13px;
        color: var(--muted);
        transition: all 0.2s;
      }

      .billing-toggle-label input {
        position: absolute;
        opacity: 0;
      }

      .billing-toggle-label input:checked + span {
        color: var(--text);
        font-weight: 600;
      }

      .billing-toggle-label:has(input:checked) {
        background: var(--panel);
      }

      .billing-save-badge {
        background: var(--good);
        color: var(--bg);
        padding: 2px 6px;
        border-radius: 4px;
        font-size: 10px;
        font-weight: 600;
        text-transform: uppercase;
      }

      .billing-plans-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 20px;
      }

      .billing-plan-card {
        position: relative;
        background: var(--panel);
        border: 2px solid var(--border);
        border-radius: 8px;
        padding: 24px;
        transition: all 0.2s;
      }

      .billing-plan-card:hover {
        border-color: var(--accent);
        transform: translateY(-2px);
      }

      .billing-plan-card.current {
        border-color: var(--accent);
        background: rgba(34, 211, 238, 0.05);
      }

      .billing-plan-card.popular {
        border-color: var(--accent-2);
      }

      .billing-plan-badge {
        position: absolute;
        top: -10px;
        right: 20px;
        background: var(--accent);
        color: var(--bg);
        padding: 4px 12px;
        border-radius: 12px;
        font-size: 11px;
        font-weight: 600;
        text-transform: uppercase;
      }

      .billing-plan-badge.current {
        background: var(--good);
      }

      .billing-plan-badge.popular {
        background: linear-gradient(135deg, var(--accent), var(--accent-2));
      }

      .billing-plan-card-header {
        margin-bottom: 20px;
      }

      .billing-plan-card h3 {
        font-size: 20px;
        font-weight: 600;
        color: var(--text);
        margin: 0 0 8px 0;
      }

      .billing-plan-card-price {
        margin: 12px 0;
      }

      .billing-price-currency {
        font-size: 16px;
        color: var(--muted);
        vertical-align: super;
      }

      .billing-plan-card-price .billing-price-amount {
        font-size: 36px;
        font-weight: 700;
        color: var(--text);
      }

      .billing-plan-card-desc {
        font-size: 13px;
        color: var(--muted);
        margin: 8px 0 0 0;
      }

      .billing-plan-features {
        list-style: none;
        padding: 0;
        margin: 0 0 20px 0;
      }

      .billing-plan-features li {
        font-size: 14px;
        color: var(--text);
        padding: 8px 0;
        border-bottom: 1px solid var(--surface);
      }

      .billing-plan-features li:last-child {
        border-bottom: none;
      }

      .billing-feature-check {
        color: var(--good);
        margin-right: 8px;
        font-weight: 600;
      }

      .billing-plan-actions {
        margin-top: auto;
      }

      .billing-plan-actions button {
        width: 100%;
      }

      /* Billing History */
      .billing-history-section h4 {
        font-size: 18px;
        font-weight: 600;
        color: var(--text);
        margin: 0 0 16px 0;
      }

      .billing-history-table {
        width: 100%;
        border-collapse: collapse;
        background: var(--panel);
        border: 1px solid var(--border);
        border-radius: 6px;
        overflow: hidden;
      }

      .billing-history-table thead {
        background: var(--surface);
      }

      .billing-history-table th {
        padding: 12px 16px;
        text-align: left;
        font-size: 12px;
        font-weight: 600;
        color: var(--muted);
        text-transform: uppercase;
        letter-spacing: 0.5px;
      }

      .billing-history-table td {
        padding: 12px 16px;
        border-top: 1px solid var(--surface);
        color: var(--text);
        font-size: 14px;
      }

      .billing-invoice-status {
        padding: 4px 8px;
        border-radius: 4px;
        font-size: 12px;
        font-weight: 600;
        text-transform: uppercase;
      }

      .billing-invoice-status.paid {
        background: rgba(34, 197, 94, 0.1);
        color: var(--good);
      }

      .billing-invoice-status.pending {
        background: rgba(251, 191, 36, 0.1);
        color: var(--warn);
      }

      .billing-no-history {
        color: var(--muted);
        text-align: center;
        padding: 40px;
      }

      /* Status Message */
      .billing-status-message {
        padding: 12px;
        border-radius: 6px;
        margin-top: 16px;
        font-size: 14px;
      }

      .billing-status-success {
        background: rgba(34, 197, 94, 0.1);
        color: var(--good);
      }

      .billing-status-error {
        background: rgba(239, 68, 68, 0.1);
        color: var(--bad);
      }

      .billing-status-info {
        background: rgba(34, 211, 238, 0.1);
        color: var(--accent);
      }

      /* Paywall Modal */
      .uba-paywall-modal {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        z-index: 10000;
        display: none;
        align-items: center;
        justify-content: center;
        padding: 20px;
      }

      .uba-paywall-overlay {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.7);
        backdrop-filter: blur(4px);
      }

      .uba-paywall-content {
        position: relative;
        background: var(--bg);
        border-radius: 12px;
        max-width: 900px;
        width: 100%;
        max-height: 90vh;
        overflow-y: auto;
        padding: 32px;
      }

      .uba-paywall-close {
        position: absolute;
        top: 16px;
        right: 16px;
        background: var(--surface);
        border: none;
        border-radius: 50%;
        width: 32px;
        height: 32px;
        font-size: 24px;
        line-height: 1;
        cursor: pointer;
        color: var(--text);
        transition: all 0.2s;
      }

      .uba-paywall-close:hover {
        background: var(--border);
      }

      .uba-paywall-header {
        text-align: center;
        margin-bottom: 32px;
      }

      .uba-paywall-icon {
        font-size: 64px;
        margin-bottom: 16px;
      }

      .uba-paywall-header h2 {
        font-size: 28px;
        font-weight: 700;
        color: var(--text);
        margin: 0 0 8px 0;
      }

      .uba-paywall-header p {
        font-size: 16px;
        color: var(--muted);
        margin: 0;
      }

      .uba-paywall-limit-info {
        text-align: center;
        margin-bottom: 32px;
      }

      .uba-paywall-limit-bar {
        height: 8px;
        background: var(--surface);
        border-radius: 4px;
        overflow: hidden;
        margin-bottom: 8px;
      }

      .uba-paywall-limit-fill {
        height: 100%;
        background: linear-gradient(90deg, var(--warn), #ef4444);
      }

      .uba-paywall-plans {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 20px;
        margin-bottom: 24px;
      }

      .uba-paywall-plan {
        background: var(--panel);
        border: 2px solid var(--border);
        border-radius: 8px;
        padding: 20px;
      }

      .uba-paywall-plan.popular {
        border-color: var(--accent);
      }

      .uba-paywall-footer {
        text-align: center;
        padding-top: 24px;
        border-top: 1px solid var(--border);
        color: var(--muted);
        font-size: 14px;
      }

      .uba-paywall-footer a {
        color: var(--accent);
        text-decoration: none;
      }

      .uba-paywall-footer a:hover {
        text-decoration: underline;
      }

      .uba-plan-limit {
        font-size: 16px;
        color: var(--text);
        margin: 12px 0;
        text-align: center;
      }

      @media (max-width: 768px) {
        .billing-plans-grid,
        .uba-paywall-plans {
          grid-template-columns: 1fr;
        }

        .billing-plan-header {
          flex-direction: column;
          align-items: flex-start;
          gap: 12px;
        }

        .billing-plan-price {
          text-align: left;
        }
      }

      /* Enterprise Features Styles */
      /* Feature Flags */
      .flag-item {
        border: 1px solid var(--border);
        border-radius: 8px;
        padding: 16px;
        margin-bottom: 12px;
        background: var(--panel);
      }

      .flag-header {
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        gap: 16px;
      }

      .flag-info {
        flex: 1;
      }

      .flag-name {
        font-size: 16px;
        font-weight: 600;
        color: var(--text);
        margin: 0 0 4px 0;
      }

      .flag-description {
        font-size: 14px;
        color: var(--muted);
        margin: 0 0 8px 0;
      }

      .flag-meta {
        display: flex;
        gap: 8px;
        flex-wrap: wrap;
      }

      .flag-type-badge,
      .flag-override-badge,
      .flag-status-badge {
        font-size: 11px;
        padding: 4px 8px;
        border-radius: 4px;
        font-weight: 500;
        text-transform: uppercase;
      }

      .flag-type-badge {
        background: var(--border);
        color: var(--muted);
      }

      .flag-override-badge {
        background: rgba(245, 158, 11, 0.2);
        color: #f59e0b;
      }

      .flag-status-badge.status-active {
        background: rgba(34, 197, 94, 0.2);
        color: var(--good);
      }

      .flag-status-badge.status-inactive {
        background: rgba(107, 114, 128, 0.2);
        color: var(--muted);
      }

      .flag-rollout,
      .flag-targets {
        margin-top: 12px;
        padding-top: 12px;
        border-top: 1px solid var(--border);
      }

      .flag-rollout label,
      .flag-targets label {
        display: block;
        font-size: 13px;
        font-weight: 500;
        color: var(--text);
        margin-bottom: 8px;
      }

      .rollout-value {
        color: var(--accent);
        font-weight: 600;
      }

      .rollout-slider {
        width: 100%;
        height: 6px;
        border-radius: 3px;
        background: var(--border);
        outline: none;
        -webkit-appearance: none;
      }

      .rollout-slider::-webkit-slider-thumb {
        -webkit-appearance: none;
        appearance: none;
        width: 18px;
        height: 18px;
        border-radius: 50%;
        background: var(--accent);
        cursor: pointer;
      }

      .rollout-slider::-moz-range-thumb {
        width: 18px;
        height: 18px;
        border-radius: 50%;
        background: var(--accent);
        cursor: pointer;
        border: none;
      }

      .role-checkboxes,
      .plan-checkboxes {
        display: flex;
        gap: 16px;
        flex-wrap: wrap;
      }

      .flag-override-info {
        margin-top: 12px;
        padding: 12px;
        background: rgba(245, 158, 11, 0.1);
        border-radius: 6px;
        border-left: 3px solid #f59e0b;
      }

      .flag-override-info p {
        margin: 0 0 8px 0;
        font-size: 13px;
        color: var(--text);
      }

      /* Analytics Dashboard */
      .activity-score {
        text-align: center;
        padding: 24px;
      }

      .score-circle {
        position: relative;
        display: inline-block;
        margin-bottom: 16px;
      }

      .score-value {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        font-size: 32px;
        font-weight: 700;
        color: var(--text);
      }

      .score-label {
        font-size: 16px;
        font-weight: 600;
        color: var(--text);
        margin-bottom: 8px;
      }

      .score-description {
        font-size: 14px;
        color: var(--muted);
        margin: 0;
      }

      .activity-score.score-high .score-circle circle:last-child {
        stroke: #10b981;
      }

      .activity-score.score-medium .score-circle circle:last-child {
        stroke: #f59e0b;
      }

      .activity-score.score-low .score-circle circle:last-child {
        stroke: #ef4444;
      }

      .usage-summary-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 16px;
        margin-bottom: 24px;
      }

      .usage-card {
        background: var(--panel);
        border: 1px solid var(--border);
        border-radius: 8px;
        padding: 20px;
        text-align: center;
      }

      .usage-icon {
        font-size: 32px;
        margin-bottom: 12px;
      }

      .usage-value {
        font-size: 28px;
        font-weight: 700;
        color: var(--accent);
        margin-bottom: 4px;
      }

      .usage-label {
        font-size: 13px;
        color: var(--muted);
        text-transform: uppercase;
        letter-spacing: 0.5px;
      }

      .usage-breakdown h4,
      .timeline-chart h4,
      .top-entities-card h4,
      .events-pie-chart h4 {
        font-size: 14px;
        font-weight: 600;
        color: var(--text);
        margin: 0 0 12px 0;
        text-transform: uppercase;
        letter-spacing: 0.5px;
      }

      .event-type-list {
        display: flex;
        flex-direction: column;
        gap: 8px;
      }

      .event-type-item {
        display: flex;
        justify-content: space-between;
        padding: 8px 12px;
        background: var(--panel);
        border-radius: 4px;
        border-left: 3px solid var(--accent);
      }

      .event-type-name {
        font-size: 13px;
        color: var(--text);
      }

      .event-type-count {
        font-size: 13px;
        font-weight: 600;
        color: var(--accent);
      }

      .timeline-chart {
        display: flex;
        align-items: flex-end;
        gap: 4px;
        height: 200px;
        padding: 16px;
        background: var(--panel);
        border-radius: 8px;
        overflow-x: auto;
      }

      .timeline-bar-wrapper {
        flex: 1;
        min-width: 40px;
        display: flex;
        flex-direction: column;
        align-items: center;
        height: 100%;
        justify-content: flex-end;
      }

      .timeline-bar {
        width: 100%;
        background: linear-gradient(to top, var(--accent), rgba(34, 211, 238, 0.5));
        border-radius: 4px 4px 0 0;
        min-height: 2px;
        position: relative;
        transition: all 0.2s;
        cursor: pointer;
      }

      .timeline-bar:hover {
        opacity: 0.8;
      }

      .timeline-value {
        position: absolute;
        top: -20px;
        left: 50%;
        transform: translateX(-50%);
        font-size: 10px;
        color: var(--text);
        white-space: nowrap;
      }

      .timeline-date {
        font-size: 10px;
        color: var(--muted);
        margin-top: 4px;
        transform: rotate(-45deg);
        transform-origin: center;
      }

      .top-entities-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 16px;
      }

      .top-entities-card {
        background: var(--panel);
        border: 1px solid var(--border);
        border-radius: 8px;
        padding: 16px;
      }

      .entity-list {
        display: flex;
        flex-direction: column;
        gap: 8px;
      }

      .entity-item {
        display: flex;
        align-items: center;
        gap: 12px;
        padding: 8px;
        background: var(--surface);
        border-radius: 4px;
      }

      .entity-rank {
        width: 24px;
        height: 24px;
        background: var(--accent);
        color: var(--bg);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 12px;
        font-weight: 700;
        flex-shrink: 0;
      }

      .entity-name {
        flex: 1;
        font-size: 13px;
        color: var(--text);
        font-weight: 500;
      }

      .entity-activity {
        font-size: 12px;
        color: var(--muted);
      }

      .pie-slice-label {
        display: flex;
        align-items: center;
        gap: 8px;
        padding: 8px;
        margin-bottom: 4px;
      }

      .pie-color {
        width: 16px;
        height: 16px;
        border-radius: 2px;
        flex-shrink: 0;
      }

      .pie-type {
        flex: 1;
        font-size: 13px;
        color: var(--text);
      }

      .pie-percentage {
        font-size: 13px;
        font-weight: 600;
        color: var(--accent);
      }
    </style>
  </head>
  <body>
    <section id="uba-dashboard">
      <div id="page-id" data-page="settings-page">
        <div class="uba-shell">
          <aside class="uba-sidebar">
            <div>
              <div class="uba-logo">MHM <span>UBA</span></div>
              <p class="uba-tagline" data-i18n="app.tagline">
                Universal Business Automator ‚Äî one workspace for clients, tasks,
                invoices and smart tools.
              </p>
              <div class="uba-badge">
                <span class="uba-badge-dot"></span
                ><span data-i18n="app.badge"
                  >Private beta ¬∑ Built in the Netherlands</span
                >
              </div>
            </div>

            <div class="uba-language">
              <label for="language-select" data-i18n="language.label"
                >Language</label
              >
              <select id="language-select">
                <option value="en" data-i18n="language.en">English</option>
                <option value="ar" data-i18n="language.ar">Arabic</option>
                <option value="nl" data-i18n="language.nl">Dutch</option>
                <option value="fr" data-i18n="language.fr">French</option>
                <option value="es" data-i18n="language.es">Spanish</option>
                <option value="de" data-i18n="language.de">German</option>
              </select>
            </div>

            <div>
              <div class="uba-nav-label" data-i18n="nav.workspaceLabel">
                Workspace
              </div>
              <nav class="uba-nav">
                <a class="uba-nav-btn" href="index.html"
                  ><span class="icon">üìà</span
                  ><span data-i18n="nav.dashboard">Dashboard</span
                  ><small data-i18n="nav.dashboardSub">Overview</small></a
                >
                <a class="uba-nav-btn" href="clients.html"
                  ><span class="icon">üßë‚Äçüíª</span
                  ><span data-i18n="nav.clients">Clients</span
                  ><small data-i18n="nav.clientsSub">CRM</small></a
                >
                <a class="uba-nav-btn" href="projects.html"
                  ><span class="icon">üíº</span
                  ><span data-i18n="nav.projects">Projects</span
                  ><small data-i18n="nav.projectsSub">Pipeline</small></a
                >
                <a class="uba-nav-btn" href="tasks.html"
                  ><span class="icon">‚úÖ</span
                  ><span data-i18n="nav.tasks">Tasks</span
                  ><small data-i18n="nav.tasksSub">Today</small></a
                >
                <a class="uba-nav-btn" href="invoices.html"
                  ><span class="icon">üíµ</span
                  ><span data-i18n="nav.invoices">Invoices</span
                  ><small data-i18n="nav.invoicesSub">Billing</small></a
                >
                <a class="uba-nav-btn" href="automations.html"
                  ><span class="icon">ü§ñ</span
                  ><span data-i18n="nav.automations">Automations</span
                  ><small data-i18n="nav.automationsSub">Flows</small></a
                >
                <a class="uba-nav-btn" href="calendar.html"
                  ><span class="icon">üìÖ</span><span>Calendar</span></a
                >
                <a class="uba-nav-btn" href="leads.html"
                  ><span class="icon">üß≤</span><span>Leads</span></a
                >
                <a class="uba-nav-btn" href="expenses.html"
                  ><span class="icon">üì§</span><span>Expenses</span></a
                >
                <a class="uba-nav-btn" href="files.html"
                  ><span class="icon">üìÅ</span><span>Files</span></a
                >
                <a class="uba-nav-btn" href="reports.html"
                  ><span class="icon">üìë</span><span>Reports</span></a
                >
                <a class="uba-nav-btn" href="smart-tools.html"
                  ><span class="icon">üß†</span
                  ><span data-i18n="nav.smartTools">UBA Smart Tools</span
                  ><small data-i18n="nav.smartToolsSub">AI ops</small></a
                >
                <a class="uba-nav-btn" href="insights.html"
                  ><span class="icon">üìä</span
                  ><span data-i18n="nav.insights">Insights Lab</span
                  ><small data-i18n="nav.insightsSub">Reports</small></a
                >
                <a class="uba-nav-btn" href="help.html"
                  ><span class="icon">üí¨</span
                  ><span data-i18n="nav.support">Success Desk</span
                  ><small data-i18n="nav.supportSub">Guidance</small></a
                >
                <a class="uba-nav-btn active" href="settings.html"
                  ><span class="icon">üõ†Ô∏è</span
                  ><span data-i18n="nav.settings">Settings</span
                  ><small data-i18n="nav.settingsSub">Workspace</small></a
                >
              </nav>
            </div>
            <div class="uba-sidebar-footer" data-i18n="sidebar.footer">
              Designed for small teams and solo founders who are tired of 7
              different tools just to run one business.
            </div>
          </aside>

          <main class="uba-main">
            <header class="uba-topbar">
              <div class="uba-top-left">
                <p class="uba-top-kicker">Settings</p>
                <h1 id="uba-view-title" data-i18n="view.settings.title">
                  Settings
                </h1>
                <p id="uba-view-desc" data-i18n="view.settings.desc">
                  Account and workspace configuration.
                </p>
              </div>
              <div class="uba-top-right">
                <div class="workspace-selector-container">
                  <select id="workspace-select" class="uba-select workspace-selector">
                    <option>Loading workspaces...</option>
                  </select>
                  <button class="uba-btn-ghost workspace-new-btn" data-workspace-action="create" title="Create new workspace">
                    ‚ûï
                  </button>
                </div>
                <div class="uba-user-pill">
                  <span class="uba-avatar"></span>
                  <span id="uba-user-label">Admin</span>
                </div>
              </div>
            </header>

            <div class="uba-views">
              <section class="uba-view" data-view="settings">
                <!-- Theme Settings -->
                <div class="uba-card uba-settings-section" style="padding: 20px; margin-bottom: 16px;">
                  <div class="uba-settings-header">
                    <h3 class="uba-settings-title">
                      <span class="uba-settings-icon">üé®</span>
                      <span data-i18n="settings.theme.title">Theme</span>
                    </h3>
                    <p class="uba-settings-desc" data-i18n="settings.theme.desc">
                      Choose your preferred visual appearance
                    </p>
                  </div>
                  <div class="uba-theme-toggle">
                    <label class="uba-toggle-switch">
                      <input type="checkbox" id="theme-toggle" />
                      <span class="uba-toggle-slider"></span>
                      <span class="uba-toggle-labels">
                        <span data-i18n="settings.theme.light">Light</span>
                        <span data-i18n="settings.theme.dark">Dark</span>
                      </span>
                    </label>
                  </div>
                </div>

                <!-- Language Settings -->
                <div class="uba-card uba-settings-section" style="padding: 20px; margin-bottom: 16px;">
                  <div class="uba-settings-header">
                    <h3 class="uba-settings-title">
                      <span class="uba-settings-icon">üåç</span>
                      <span data-i18n="language.label">Language</span>
                    </h3>
                    <p class="uba-settings-desc" data-i18n="settings.language.desc">
                      Select your preferred language for the interface
                    </p>
                  </div>
                  <div class="uba-settings-field">
                    <select id="language-select-settings" class="uba-select uba-select-full">
                      <option value="en" data-i18n="language.en">English</option>
                      <option value="ar" data-i18n="language.ar">Arabic</option>
                      <option value="nl" data-i18n="language.nl">Dutch</option>
                      <option value="fr" data-i18n="language.fr">French</option>
                      <option value="es" data-i18n="language.es">Spanish</option>
                      <option value="de" data-i18n="language.de">German</option>
                    </select>
                  </div>
                </div>

                <!-- Current Workspace Settings -->
                <div class="uba-card uba-settings-section" style="padding: 20px; margin-bottom: 16px;">
                  <div class="uba-settings-header">
                    <h3 class="uba-settings-title">
                      <span class="uba-settings-icon">üè¢</span>
                      <span data-i18n="settings.workspace.title">Current Workspace</span>
                    </h3>
                    <p class="uba-settings-desc" data-i18n="settings.workspace.desc">
                      Configure the active workspace name and details
                    </p>
                  </div>
                  <form id="workspace-form">
                    <div class="uba-settings-grid">
                      <div class="uba-settings-field">
                        <label for="setting-workspace-name" data-i18n="settings.workspace.name">
                          Workspace name
                        </label>
                        <input
                          id="setting-workspace-name"
                          type="text"
                          placeholder="My workspace"
                          class="uba-input"
                        />
                      </div>
                      <div class="uba-settings-field">
                        <label for="setting-workspace-description" data-i18n="settings.workspace.description">
                          Description
                        </label>
                        <input
                          id="setting-workspace-description"
                          type="text"
                          placeholder="Brief description (optional)"
                          class="uba-input"
                        />
                      </div>
                    </div>
                    <div class="uba-settings-field">
                      <label for="setting-workspace-industry" data-i18n="settings.workspace.industry">
                        Industry
                      </label>
                      <input
                        id="setting-workspace-industry"
                        type="text"
                        placeholder="e.g., Technology, Consulting, Design"
                        class="uba-input"
                      />
                    </div>
                    <div class="uba-settings-actions" style="margin-top: 16px;">
                      <button type="button" id="save-workspace-settings" class="uba-btn-primary">
                        Save Workspace Settings
                      </button>
                    </div>
                  </form>
                </div>

                <!-- Workspace Management -->
                <div class="uba-card uba-settings-section" style="padding: 20px; margin-bottom: 16px;">
                  <div class="uba-settings-header">
                    <h3 class="uba-settings-title">
                      <span class="uba-settings-icon">üìÅ</span>
                      <span>Workspace Management</span>
                    </h3>
                    <p class="uba-settings-desc">
                      Create, switch between, and manage multiple workspaces
                    </p>
                  </div>
                  
                  <div class="workspace-actions" style="margin-bottom: 20px;">
                    <button class="uba-btn-primary" data-workspace-action="create">
                      ‚ûï Create New Workspace
                    </button>
                    <button class="uba-btn-ghost" onclick="importWorkspace()">
                      üìÇ Import Workspace
                    </button>
                  </div>

                  <div class="workspace-list">
                    <h4 style="margin-bottom: 12px; color: var(--text);">Available Workspaces</h4>
                    <div id="workspace-list-container" class="workspace-items">
                      <!-- Workspace items will be populated here -->
                    </div>
                  </div>
                </div>

                <!-- Workspace Members -->
                <div class="uba-card uba-settings-section" style="padding: 20px; margin-bottom: 16px;">
                  <div class="uba-settings-header">
                    <h3 class="uba-settings-title">
                      <span class="uba-settings-icon">üë•</span>
                      <span>Workspace Members</span>
                    </h3>
                    <p class="uba-settings-desc">
                      Invite team members and manage roles and permissions
                    </p>
                  </div>

                  <!-- Invite Member Form -->
                  <div class="member-invite-form" style="margin-bottom: 24px; padding: 16px; background: var(--surface); border-radius: 8px;">
                    <h4 style="margin-bottom: 12px; color: var(--text); font-size: 14px;">Invite New Member</h4>
                    <div class="uba-settings-grid">
                      <div class="uba-settings-field">
                        <label for="invite-email">Email</label>
                        <input
                          id="invite-email"
                          type="email"
                          placeholder="colleague@example.com"
                          class="uba-input"
                        />
                      </div>
                      <div class="uba-settings-field">
                        <label for="invite-name">Name (optional)</label>
                        <input
                          id="invite-name"
                          type="text"
                          placeholder="John Doe"
                          class="uba-input"
                        />
                      </div>
                    </div>
                    <div class="uba-settings-field">
                      <label for="invite-role">Role</label>
                      <select id="invite-role" class="uba-select uba-select-full">
                        <option value="editor">Editor - Can create and edit data</option>
                        <option value="admin">Admin - Full permissions except workspace deletion</option>
                        <option value="viewer">Viewer - Read-only access</option>
                      </select>
                    </div>
                    <button type="button" id="invite-member-btn" class="uba-btn-primary">
                      Send Invitation
                    </button>
                  </div>

                  <!-- Members List -->
                  <div class="members-list">
                    <h4 style="margin-bottom: 12px; color: var(--text); font-size: 14px;">Team Members</h4>
                    <div id="members-list-container" class="member-items">
                      <!-- Member items will be populated here -->
                    </div>
                  </div>

                  <div id="members-status" class="uba-settings-status" style="display: none; margin-top: 12px;"></div>
                </div>

                <!-- Subscription & Billing -->
                <div class="uba-card uba-settings-section" style="padding: 20px; margin-bottom: 16px;">
                  <div class="uba-settings-header">
                    <h3 class="uba-settings-title">
                      <span class="uba-settings-icon">üí≥</span>
                      <span>Subscription & Billing</span>
                    </h3>
                    <p class="uba-settings-desc">
                      Manage your subscription plan and billing information
                    </p>
                  </div>

                  <div id="billing-section-container">
                    <!-- Billing content will be populated here -->
                    <p style="color: var(--muted);">Loading billing information...</p>
                  </div>
                </div>

                <!-- User Profile Settings -->
                <div class="uba-card uba-settings-section" style="padding: 20px; margin-bottom: 16px;">
                  <div class="uba-settings-header">
                    <h3 class="uba-settings-title">
                      <span class="uba-settings-icon">üë§</span>
                      <span data-i18n="settings.profile.title">User Profile</span>
                    </h3>
                    <p class="uba-settings-desc" data-i18n="settings.profile.desc">
                      Manage your personal account information
                    </p>
                  </div>
                  <form id="profile-form">
                    <div class="uba-settings-grid">
                      <div class="uba-settings-field">
                        <label for="setting-user-name" data-i18n="settings.profile.name">
                          Display Name
                        </label>
                        <input
                          id="setting-user-name"
                          type="text"
                          placeholder="Your name"
                          class="uba-input"
                        />
                      </div>
                      <div class="uba-settings-field">
                        <label for="setting-user-email" data-i18n="settings.profile.email">
                          Email
                        </label>
                        <input
                          id="setting-user-email"
                          type="email"
                          placeholder="you@example.com"
                          class="uba-input"
                          readonly
                          style="opacity: 0.6; cursor: not-allowed;"
                        />
                        <small style="color: var(--muted); font-size: 12px; margin-top: 4px; display: block;">Email is read-only</small>
                      </div>
                    </div>
                    <div class="uba-settings-field">
                      <label for="setting-timezone" data-i18n="settings.workspace.timezone">
                        Timezone
                      </label>
                      <select id="setting-timezone" class="uba-select uba-select-full">
                        <option value="UTC">UTC</option>
                        <option value="America/New_York">Eastern Time</option>
                        <option value="America/Chicago">Central Time</option>
                        <option value="America/Denver">Mountain Time</option>
                        <option value="America/Los_Angeles">Pacific Time</option>
                        <option value="Europe/London">London</option>
                        <option value="Europe/Paris">Paris</option>
                        <option value="Europe/Amsterdam">Amsterdam</option>
                        <option value="Asia/Tokyo">Tokyo</option>
                      </select>
                    </div>
                  </form>
                </div>

                <!-- Password Update (Local Mode Mock) -->
                <div class="uba-card uba-settings-section" style="padding: 20px; margin-bottom: 16px;">
                  <div class="uba-settings-header">
                    <h3 class="uba-settings-title">
                      <span class="uba-settings-icon">üîí</span>
                      <span>Change Password</span>
                    </h3>
                    <p class="uba-settings-desc">
                      Update your password (local mode only)
                    </p>
                  </div>
                  <form id="password-form">
                    <div class="uba-settings-field">
                      <label for="setting-new-password">
                        New Password
                      </label>
                      <input
                        id="setting-new-password"
                        type="password"
                        placeholder="Enter new password"
                        class="uba-input"
                        minlength="6"
                      />
                    </div>
                    <div class="uba-settings-field">
                      <label for="setting-confirm-password">
                        Confirm Password
                      </label>
                      <input
                        id="setting-confirm-password"
                        type="password"
                        placeholder="Confirm new password"
                        class="uba-input"
                        minlength="6"
                      />
                    </div>
                    <div class="uba-settings-actions" style="margin-top: 16px;">
                      <button type="button" id="update-password-btn" class="uba-btn-primary">
                        Update Password
                      </button>
                    </div>
                  </form>
                </div>

                <!-- Preferences -->
                <div class="uba-card uba-settings-section" style="padding: 20px; margin-bottom: 16px;">
                  <div class="uba-settings-header">
                    <h3 class="uba-settings-title">
                      <span class="uba-settings-icon">‚öôÔ∏è</span>
                      <span data-i18n="settings.preferences.title">Preferences</span>
                    </h3>
                    <p class="uba-settings-desc" data-i18n="settings.preferences.desc">
                      Customize your workspace behavior
                    </p>
                  </div>
                  <div class="uba-settings-toggles">
                    <label class="uba-setting-item">
                      <input id="setting-notifications" type="checkbox" class="uba-checkbox" />
                      <div class="uba-setting-info">
                        <span class="uba-setting-label" data-i18n="settings.preferences.notifications">
                          Enable notifications
                        </span>
                        <span class="uba-setting-help" data-i18n="settings.preferences.notifications.help">
                          Receive alerts for important events
                        </span>
                      </div>
                    </label>
                    <label class="uba-setting-item">
                      <input id="setting-single-page" type="checkbox" class="uba-checkbox" />
                      <div class="uba-setting-info">
                        <span class="uba-setting-label" data-i18n="settings.preferences.singlePage">
                          Single-page navigation
                        </span>
                        <span class="uba-setting-help" data-i18n="settings.preferences.singlePage.help">
                          Navigate without page reloads
                        </span>
                      </div>
                    </label>
                    <label class="uba-setting-item">
                      <input id="setting-compact-view" type="checkbox" class="uba-checkbox" />
                      <div class="uba-setting-info">
                        <span class="uba-setting-label" data-i18n="settings.preferences.compact">
                          Compact view
                        </span>
                        <span class="uba-setting-help" data-i18n="settings.preferences.compact.help">
                          Show more content with smaller spacing
                        </span>
                      </div>
                    </label>
                  </div>
                </div>

                <!-- AI Preferences -->
                <div class="uba-card uba-settings-section" style="padding: 20px; margin-bottom: 16px;">
                  <div class="uba-settings-header">
                    <h3 class="uba-settings-title">
                      <span class="uba-settings-icon">ü§ñ</span>
                      <span>AI Preferences</span>
                    </h3>
                    <p class="uba-settings-desc">
                      Configure AI assistant behavior and features
                    </p>
                  </div>
                  
                  <div style="margin-bottom: 24px;">
                    <label style="display: block; margin-bottom: 8px; font-weight: 500;">AI Tone</label>
                    <select id="setting-ai-tone" class="uba-select" style="width: 100%; max-width: 300px;">
                      <option value="professional">Professional</option>
                      <option value="friendly">Friendly</option>
                      <option value="formal">Formal</option>
                    </select>
                    <p style="font-size: 13px; color: var(--muted); margin-top: 4px;">
                      How the AI should communicate with you
                    </p>
                  </div>
                  
                  <div style="margin-bottom: 24px;">
                    <label style="display: block; margin-bottom: 8px; font-weight: 500;">AI Verbosity</label>
                    <select id="setting-ai-verbosity" class="uba-select" style="width: 100%; max-width: 300px;">
                      <option value="short">Short & Concise</option>
                      <option value="medium">Medium</option>
                      <option value="long">Detailed & Thorough</option>
                    </select>
                    <p style="font-size: 13px; color: var(--muted); margin-top: 4px;">
                      How detailed AI responses should be
                    </p>
                  </div>
                  
                  <div class="uba-settings-toggles">
                    <label class="uba-setting-item">
                      <input id="setting-ai-voice-mode" type="checkbox" class="uba-checkbox" />
                      <div class="uba-setting-info">
                        <span class="uba-setting-label">Enable voice mode</span>
                        <span class="uba-setting-help">
                          Allow voice input for AI chat
                        </span>
                      </div>
                    </label>
                    
                    <label class="uba-setting-item">
                      <input id="setting-ai-auto-actions" type="checkbox" class="uba-checkbox" />
                      <div class="uba-setting-info">
                        <span class="uba-setting-label">Enable auto-actions</span>
                        <span class="uba-setting-help">
                          Run daily and weekly AI checks automatically
                        </span>
                      </div>
                    </label>
                    
                    <label class="uba-setting-item">
                      <input id="setting-ai-embedded-buttons" type="checkbox" class="uba-checkbox" checked />
                      <div class="uba-setting-info">
                        <span class="uba-setting-label">Show embedded AI buttons</span>
                        <span class="uba-setting-help">
                          Display AI assistant buttons throughout the interface
                        </span>
                      </div>
                    </label>
                  </div>
                </div>

                <!-- Actions -->
                <div class="uba-card uba-settings-section" style="padding: 20px; margin-bottom: 16px;">
                  <div class="uba-settings-actions">
                    <button type="button" id="save-all-settings" class="uba-btn-primary">
                      <span data-i18n="settings.actions.save">Save All Settings</span>
                    </button>
                    <button type="button" id="reset-demo-data" class="uba-btn-ghost">
                      <span data-i18n="settings.actions.reset">Reset Demo Data</span>
                    </button>
                    <button type="button" class="uba-logout-btn uba-btn-ghost" style="margin-left: auto;">
                      <span data-i18n="settings.actions.logout">Logout</span>
                    </button>
                  </div>
                  <div id="settings-status" class="uba-settings-status"></div>
                </div>
                
                <!-- Feature Flags -->
                <div class="uba-card" style="margin-top: 12px; padding: 16px">
                  <h3>üöÄ Feature Flags</h3>
                  <p style="color: var(--muted); margin-bottom: 16px; font-size: 14px;">
                    Control feature rollouts and test new capabilities with granular targeting.
                  </p>
                  <div id="feature-flags-list"></div>
                  <div id="flags-status" style="display: none; margin-top: 12px;"></div>
                </div>

                <!-- Analytics Dashboard -->
                <div class="uba-card" style="margin-top: 12px; padding: 16px">
                  <h3>üìä Usage Analytics</h3>
                  <p style="color: var(--muted); margin-bottom: 16px; font-size: 14px;">
                    Monitor workspace activity, user engagement, and feature adoption.
                  </p>
                  
                  <div id="activity-score-display" style="margin-bottom: 24px;"></div>
                  <div id="usage-summary-display" style="margin-bottom: 24px;"></div>
                  <div id="event-timeline-chart" style="margin-bottom: 24px;"></div>
                  <div id="top-entities-display" style="margin-bottom: 24px;"></div>
                  <div id="events-by-type-chart"></div>
                </div>
                
                <!-- Backup System -->
                <div class="uba-card" style="margin-top: 12px; padding: 16px">
                  <h3 data-i18n="settings.backup.title">Backup & Restore</h3>
                  <p style="color: var(--muted); margin-bottom: 16px; font-size: 14px;" data-i18n="settings.backup.desc">
                    Export your complete workspace to a JSON file or import a backup to restore your data across devices.
                  </p>
                  
                  <div style="display: flex; gap: 12px; flex-wrap: wrap; align-items: center;">
                    <button 
                      id="export-backup-btn" 
                      class="uba-btn-primary" 
                      type="button"
                      data-i18n="settings.backup.export"
                    >
                      üìÅ Export Backup
                    </button>
                    
                    <button 
                      id="import-backup-btn" 
                      class="uba-btn-ghost" 
                      type="button"
                      data-i18n="settings.backup.import"
                    >
                      üìÇ Import Backup
                    </button>
                    
                    <input 
                      id="import-backup-input" 
                      type="file" 
                      accept=".json" 
                      style="display: none;"
                    />
                  </div>
                  
                  <div style="margin-top: 12px; padding: 12px; background: rgba(59, 130, 246, 0.1); border-radius: 6px; font-size: 13px; color: var(--muted);">
                    <strong>üí° Tip:</strong> Regular backups help you move your workspace between devices and protect against data loss.
                  </div>
                </div>
              </section>
            </div>
          </main>
        </div>
      </div>
    </section>

    <script src="assets/js/i18n.js"></script>
    <script src="assets/js/workspace-manager.js"></script>
    <script src="assets/js/store.js"></script>
    <script src="assets/js/data-layer.js"></script>
    <script src="assets/js/billing.js"></script>
    <script src="assets/js/feature-flags.js"></script>
    <script src="assets/js/analytics.js"></script>
    <script src="assets/js/stripe-mock.js"></script>
    <script src="assets/js/license-keys.js"></script>
    <script src="assets/js/multi-region-billing.js"></script>
    <script src="assets/js/app.js"></script>
    <script src="assets/js/settings.js"></script>
    <script src="assets/js/settings-ui.js"></script>
    <script src="assets/js/members.js"></script>
    <script src="assets/js/billing-ui.js"></script>
    <script src="assets/js/feature-flags-ui.js"></script>
    <script src="assets/js/analytics-dashboard-ui.js"></script>
    <script src="assets/js/backup.js"></script>
    <script src="assets/js/page-loader.js"></script>
    <script>
      // Wire up password update button
      document.addEventListener('DOMContentLoaded', () => {
        const updatePasswordBtn = document.getElementById('update-password-btn');
        if (updatePasswordBtn) {
          updatePasswordBtn.addEventListener('click', async () => {
            const newPassword = document.getElementById('setting-new-password').value;
            const confirmPassword = document.getElementById('setting-confirm-password').value;
            
            if (window.SettingsUI && window.SettingsUI.updatePassword) {
              const success = await window.SettingsUI.updatePassword(newPassword, confirmPassword);
              if (success) {
                document.getElementById('setting-new-password').value = '';
                document.getElementById('setting-confirm-password').value = '';
              }
            }
          });
        }

        // Initialize Feature Flags UI
        if (window.FeatureFlagsUI) {
          window.FeatureFlagsUI.init();
        }

        // Initialize Analytics Dashboard
        if (window.AnalyticsDashboardUI) {
          window.AnalyticsDashboardUI.init();
        }
      });
    </script>
    <script>
      (function () {
        const lang = localStorage.getItem("uba-lang") || "en";
        if (
          window.ubaI18n &&
          typeof window.ubaI18n.applyTranslations === "function"
        ) {
          window.ubaI18n.applyTranslations(lang);
        }
        if (lang === "ar") document.documentElement.dir = "rtl";
      })();
    </script>
    <script>
      const pageId = document.getElementById("page-id").dataset.page;
      loadPageScripts(pageId);
    </script>
  </body>
</html>
