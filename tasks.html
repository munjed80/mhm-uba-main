<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>UBA Tasks</title>
    <link rel="stylesheet" href="assets/css/style.css" />
  </head>
  <body>
    <section id="uba-dashboard">
      <div id="page-id" data-page="tasks-page">
        <div class="uba-shell">
          <aside class="uba-sidebar">
            <div>
              <div class="uba-logo">MHM <span>UBA</span></div>
              <p class="uba-tagline" data-i18n="app.tagline">
                Universal Business Automator ‚Äî one workspace for clients, tasks,
                invoices and smart tools.
              </p>
              <div class="uba-badge">
                <span class="uba-badge-dot"></span
                ><span data-i18n="app.badge">
                  Private beta ¬∑ Built in the Netherlands
                </span>
              </div>
            </div>

            <div class="uba-language">
              <label for="language-select" data-i18n="language.label"
                >Language</label
              >
              <select id="language-select">
                <option value="en" data-i18n="language.en">English</option>
                <option value="ar" data-i18n="language.ar">Arabic</option>
                <option value="nl" data-i18n="language.nl">Dutch</option>
                <option value="fr" data-i18n="language.fr">French</option>
                <option value="es" data-i18n="language.es">Spanish</option>
                <option value="de" data-i18n="language.de">German</option>
              </select>
            </div>

            <div>
              <div class="uba-nav-label" data-i18n="nav.workspaceLabel">
                Workspace
              </div>
              <nav class="uba-nav">
                <a class="uba-nav-btn" href="index.html"
                  ><span class="icon">üìà</span>
                  <span data-i18n="nav.dashboard">Dashboard</span>
                  <small data-i18n="nav.dashboardSub">Overview</small></a
                >
                <a class="uba-nav-btn" href="clients.html"
                  ><span class="icon">üßë‚Äçüíª</span>
                  <span data-i18n="nav.clients">Clients</span>
                  <small data-i18n="nav.clientsSub">CRM</small></a
                >
                <a class="uba-nav-btn" href="projects.html"
                  ><span class="icon">üíº</span>
                  <span data-i18n="nav.projects">Projects</span>
                  <small data-i18n="nav.projectsSub">Pipeline</small></a
                >
                <a class="uba-nav-btn active" href="tasks.html"
                  ><span class="icon">‚úÖ</span>
                  <span data-i18n="nav.tasks">Tasks</span>
                  <small data-i18n="nav.tasksSub">Today</small></a
                >
                <a class="uba-nav-btn" href="invoices.html"
                  ><span class="icon">üíµ</span>
                  <span data-i18n="nav.invoices">Invoices</span>
                  <small data-i18n="nav.invoicesSub">Billing</small></a
                >
                <a class="uba-nav-btn" href="automations.html"
                  ><span class="icon">ü§ñ</span>
                  <span data-i18n="nav.automations">Automations</span>
                  <small data-i18n="nav.automationsSub">Flows</small></a
                >
                <a class="uba-nav-btn" href="calendar.html"
                  ><span class="icon">üìÖ</span><span>Calendar</span></a
                >
                <a class="uba-nav-btn" href="leads.html"
                  ><span class="icon">üß≤</span><span>Leads</span></a
                >
                <a class="uba-nav-btn" href="expenses.html"
                  ><span class="icon">üì§</span><span>Expenses</span></a
                >
                <a class="uba-nav-btn" href="files.html"
                  ><span class="icon">üìÅ</span><span>Files</span></a
                >
                <a class="uba-nav-btn" href="reports.html"
                  ><span class="icon">üìë</span><span>Reports</span></a
                >
                <a class="uba-nav-btn" href="smart-tools.html"
                  ><span class="icon">üß†</span>
                  <span data-i18n="nav.smartTools">UBA Smart Tools</span>
                  <small data-i18n="nav.smartToolsSub">AI ops</small></a
                >
                <a class="uba-nav-btn" href="insights.html"
                  ><span class="icon">üìä</span>
                  <span data-i18n="nav.insights">Insights Lab</span>
                  <small data-i18n="nav.insightsSub">Reports</small></a
                >
                <a class="uba-nav-btn" href="help.html"
                  ><span class="icon">üí¨</span>
                  <span data-i18n="nav.support">Success Desk</span>
                  <small data-i18n="nav.supportSub">Guidance</small></a
                >
                <a class="uba-nav-btn" href="settings.html"
                  ><span class="icon">üõ†Ô∏è</span>
                  <span data-i18n="nav.settings">Settings</span>
                  <small data-i18n="nav.settingsSub">Workspace</small></a
                >
              </nav>
            </div>

            <div class="uba-sidebar-footer" data-i18n="sidebar.footer">
              Designed for small teams and solo founders who are tired of 7
              different tools just to run one business.
            </div>
          </aside>

          <main class="uba-main">
            <header class="uba-topbar">
              <div class="uba-top-left">
                <p class="uba-top-kicker" data-i18n="view.tasks.kicker">
                  Task board
                </p>
                <h1 id="uba-view-title" data-i18n="view.tasks.title">Tasks</h1>
                <p id="uba-view-desc" data-i18n="view.tasks.desc">
                  Kanban-style board with local tasks and quick actions.
                </p>
              </div>
              <div class="uba-top-right">
                <select id="workspace-select" class="uba-select">
                  <option>Main workspace</option>
                </select>
                <div class="uba-user-pill">
                  <span class="uba-avatar"></span
                  ><span id="uba-user-label">Admin</span>
                </div>
              </div>
            </header>

            <div class="uba-views">
              <section class="uba-view" data-view="tasks">
                <!-- Tasks Controls Bar -->
                <div class="uba-card uba-tasks-controls">
                  <div class="uba-controls-header">
                    <div class="uba-controls-left">
                      <span class="uba-control-icon">‚úÖ</span>
                      <div>
                        <div class="uba-control-title" data-i18n="view.tasks.title">Tasks</div>
                        <div class="uba-control-subtitle">Task management ‚Ä¢ <span id="tasks-count">0</span> active</div>
                      </div>
                    </div>
                    <div class="uba-controls-right">
                      <select class="uba-select uba-select-compact" id="task-filter-project">
                        <option value="">All Projects</option>
                      </select>
                      <select class="uba-select uba-select-compact" id="task-filter-priority">
                        <option value="">All Priority</option>
                        <option value="high">High Priority</option>
                        <option value="medium">Medium Priority</option>
                        <option value="low">Low Priority</option>
                      </select>
                      <select class="uba-select uba-select-compact" id="task-sort">
                        <option value="created">Sort: Newest</option>
                        <option value="due">Sort: Due Date</option>
                        <option value="priority">Sort: Priority</option>
                        <option value="title">Sort: A-Z</option>
                      </select>
                      <button type="button" class="uba-btn uba-btn-primary uba-btn-compact" id="add-task-btn">
                        <span class="icon">+</span> New Task
                      </button>
                    </div>
                  </div>
                </div>

                <!-- Tasks Kanban Board -->
                <div class="uba-card uba-tasks-board">
                  <div class="uba-kanban-container">
                    <div class="uba-kanban-board" id="tasks-board">
                      <div class="uba-kanban-column" data-status="todo">
                        <div class="uba-column-header">
                          <div class="uba-column-title">
                            <span class="uba-column-icon">üìã</span>
                            <span>To Do</span>
                            <span class="uba-column-count" id="todo-count">0</span>
                          </div>
                          <button class="uba-column-add" onclick="addTaskToStatus('todo')" title="Add to To Do">
                            <span>+</span>
                          </button>
                        </div>
                        <div class="uba-column-body uba-drop-zone" id="tasks-todo" data-status="todo">
                          <div class="uba-column-empty" style="display: none;">
                            <span class="uba-empty-icon">üìù</span>
                            <p>No tasks to do</p>
                          </div>
                        </div>
                      </div>

                      <div class="uba-kanban-column" data-status="in_progress">
                        <div class="uba-column-header">
                          <div class="uba-column-title">
                            <span class="uba-column-icon">üîÑ</span>
                            <span>In Progress</span>
                            <span class="uba-column-count" id="in_progress-count">0</span>
                          </div>
                          <button class="uba-column-add" onclick="addTaskToStatus('in_progress')" title="Add to In Progress">
                            <span>+</span>
                          </button>
                        </div>
                        <div class="uba-column-body uba-drop-zone" id="tasks-in_progress" data-status="in_progress">
                          <div class="uba-column-empty" style="display: none;">
                            <span class="uba-empty-icon">‚öôÔ∏è</span>
                            <p>No tasks in progress</p>
                          </div>
                        </div>
                      </div>

                      <div class="uba-kanban-column" data-status="done">
                        <div class="uba-column-header">
                          <div class="uba-column-title">
                            <span class="uba-column-icon">‚úÖ</span>
                            <span>Done</span>
                            <span class="uba-column-count" id="done-count">0</span>
                          </div>
                          <button class="uba-column-add" onclick="addTaskToStatus('done')" title="Add to Done">
                            <span>+</span>
                          </button>
                        </div>
                        <div class="uba-column-body uba-drop-zone" id="tasks-done" data-status="done">
                          <div class="uba-column-empty" style="display: none;">
                            <span class="uba-empty-icon">üéâ</span>
                            <p>No completed tasks</p>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </section>
            </div>
          </main>
        </div>
      </div>
    </section>

    <!-- Task Form Modal -->
    <div class="uba-modal is-hidden" id="task-form-modal" aria-hidden="true">
      <div class="uba-modal-overlay"></div>
      <div class="uba-modal-dialog uba-modal-modern">
        <div class="uba-modal-header">
          <div class="uba-modal-title-group">
            <span class="uba-modal-icon">‚úÖ</span>
            <h3 id="task-form-title">New Task</h3>
          </div>
          <button type="button" class="uba-modal-close" id="task-form-close">√ó</button>
        </div>
        <div class="uba-modal-body">
          <form id="task-form" class="uba-form-modern">
            <input type="hidden" id="task-id">
            <div class="uba-form-row">
              <div class="uba-form-group">
                <label for="task-title" class="uba-form-label">Task Title *</label>
                <input type="text" id="task-title" class="uba-input" required placeholder="Enter task description">
              </div>
              <div class="uba-form-group">
                <label for="task-project" class="uba-form-label">Project</label>
                <select id="task-project" class="uba-select">
                  <option value="">No Project</option>
                </select>
              </div>
            </div>
            <div class="uba-form-row">
              <div class="uba-form-group">
                <label for="task-status" class="uba-form-label">Status</label>
                <select id="task-status" class="uba-select">
                  <option value="todo">üìã To Do</option>
                  <option value="in_progress">üîÑ In Progress</option>
                  <option value="done">‚úÖ Done</option>
                </select>
              </div>
              <div class="uba-form-group">
                <label for="task-priority" class="uba-form-label">Priority</label>
                <select id="task-priority" class="uba-select">
                  <option value="low">üü¢ Low</option>
                  <option value="medium">üü° Medium</option>
                  <option value="high">üî¥ High</option>
                </select>
              </div>
            </div>
            <div class="uba-form-row">
              <div class="uba-form-group">
                <label for="task-due" class="uba-form-label">Due Date</label>
                <input type="date" id="task-due" class="uba-input">
              </div>
              <div class="uba-form-group">
                <label for="task-estimate" class="uba-form-label">Time Estimate (hours)</label>
                <input type="number" id="task-estimate" class="uba-input" placeholder="0" min="0" step="0.5">
              </div>
            </div>
            <div class="uba-form-group">
              <label for="task-description" class="uba-form-label">Description</label>
              <textarea id="task-description" class="uba-input" rows="3" placeholder="Add task details, requirements, or notes..."></textarea>
            </div>
          </form>
        </div>
        <div class="uba-modal-footer">
          <button type="button" class="uba-btn uba-btn-ghost" id="task-cancel">Cancel</button>
          <button type="submit" class="uba-btn uba-btn-primary" form="task-form">
            <span class="icon">üíæ</span> Save Task
          </button>
        </div>
      </div>
    </div>

    <!-- Task Details Modal -->
    <div class="uba-modal is-hidden" id="task-detail-modal" aria-hidden="true">
      <div class="uba-modal-overlay"></div>
      <div class="uba-modal-dialog">
        <div class="uba-modal-header">
          <h3 id="task-detail-title">Task Details</h3>
          <button type="button" class="uba-modal-close" id="task-detail-close">√ó</button>
        </div>
        <div class="uba-modal-body">
          <div id="task-detail-content">
            <!-- Filled by JS -->
          </div>
        </div>
      </div>
    </div>

    <script src="assets/js/i18n.js"></script>
    <script src="assets/js/store.js"></script>
    <script src="assets/js/app.js"></script>
    <script src="assets/js/page-loader.js"></script>
    <script src="assets/js/assistant.js"></script>
    <script src="assets/js/clients.js"></script>
    <script src="assets/js/tasks.js"></script>
    <script src="assets/js/smarttools.js"></script>
    <script>
      (function () {
        const lang = localStorage.getItem("uba-lang") || "en";
        if (
          window.ubaI18n &&
          typeof window.ubaI18n.applyTranslations === "function"
        ) {
          window.ubaI18n.applyTranslations(lang);
        }
        if (lang === "ar") document.documentElement.dir = "rtl";
      })();
    </script>
    <script>
      try {
        const pageId = document.getElementById("page-id")?.dataset?.page;
        if (pageId && typeof loadPageScripts === "function")
          loadPageScripts(pageId);
      } catch (err) {
        console.warn("page-loader: failed to run loadPageScripts", err);
      }
    </script>
  </body>
</html>
