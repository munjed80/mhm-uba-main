<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>MHM UBA ‚Äì Dashboard</title>

    <link rel="stylesheet" href="assets/css/style.css" />

    <meta
      name="description"
      content="MHM Universal Business Automator ‚Äì one workspace for clients, tasks, invoices and smart tools."
    />
  </head>
  <body>
    <section id="uba-dashboard">
      <div id="page-id" data-page="index-page">
        <div class="uba-shell">
          <!-- WordPress-style Fixed Sidebar -->
          <aside class="uba-sidebar-wp">
            <div class="uba-sidebar-wp-header">
              <div class="uba-logo-wp">MHM <span>UBA</span></div>
              <div class="uba-tagline-wp">Universal Business Automator ‚Äî one workspace for clients, tasks, invoices and smart tools.</div>
            </div>
            
            <nav>
              <ul class="uba-nav-wp">
                <li class="uba-nav-wp-item">
                  <button class="uba-nav-wp-btn active" data-section="dashboard" data-title="Dashboard">
                    <span class="uba-nav-wp-icon">üìà</span>
                    <span>Dashboard</span>
                  </button>
                </li>
                <li class="uba-nav-wp-item">
                  <button class="uba-nav-wp-btn" data-section="clients" data-title="Clients">
                    <span class="uba-nav-wp-icon">üßë‚Äçüíª</span>
                    <span>Clients</span>
                  </button>
                </li>
                <li class="uba-nav-wp-item">
                  <button class="uba-nav-wp-btn" data-section="projects" data-title="Projects">
                    <span class="uba-nav-wp-icon">üíº</span>
                    <span>Projects</span>
                  </button>
                </li>
                <li class="uba-nav-wp-item">
                  <button class="uba-nav-wp-btn" data-section="tasks" data-title="Tasks">
                    <span class="uba-nav-wp-icon">‚úÖ</span>
                    <span>Tasks</span>
                  </button>
                </li>
                <li class="uba-nav-wp-item">
                  <button class="uba-nav-wp-btn" data-section="invoices" data-title="Invoices">
                    <span class="uba-nav-wp-icon">üíµ</span>
                    <span>Invoices</span>
                  </button>
                </li>
                <li class="uba-nav-wp-item">
                  <button class="uba-nav-wp-btn" data-section="automations" data-title="Automations">
                    <span class="uba-nav-wp-icon">ü§ñ</span>
                    <span>Automations</span>
                  </button>
                </li>
                <li class="uba-nav-wp-item">
                  <a class="uba-nav-wp-btn" href="calendar.html" data-title="Calendar">
                    <span class="uba-nav-wp-icon">üìÖ</span>
                    <span>Calendar</span>
                  </a>
                </li>
                <li class="uba-nav-wp-item">
                  <a class="uba-nav-wp-btn" href="leads.html" data-title="Leads">
                    <span class="uba-nav-wp-icon">üß≤</span>
                    <span>Leads</span>
                  </a>
                </li>
                <li class="uba-nav-wp-item">
                  <a class="uba-nav-wp-btn" href="expenses.html" data-title="Expenses">
                    <span class="uba-nav-wp-icon">üì§</span>
                    <span>Expenses</span>
                  </a>
                </li>
                <li class="uba-nav-wp-item">
                  <a class="uba-nav-wp-btn" href="files.html" data-title="Files">
                    <span class="uba-nav-wp-icon">üìÅ</span>
                    <span>Files</span>
                  </a>
                </li>
                <li class="uba-nav-wp-item">
                  <a class="uba-nav-wp-btn" href="reports.html" data-title="Reports">
                    <span class="uba-nav-wp-icon">üìë</span>
                    <span>Reports</span>
                  </a>
                </li>
                <li class="uba-nav-wp-item">
                  <a class="uba-nav-wp-btn" href="smart-tools.html" data-title="Smart Tools">
                    <span class="uba-nav-wp-icon">üß†</span>
                    <span>Smart Tools</span>
                  </a>
                </li>
                <li class="uba-nav-wp-item">
                  <a class="uba-nav-wp-btn" href="assistant.html" data-title="Assistant">
                    <span class="uba-nav-wp-icon">ü§ñ</span>
                    <span>Assistant</span>
                  </a>
                </li>
                <li class="uba-nav-wp-item">
                  <a class="uba-nav-wp-btn" href="insights.html" data-title="Insights Lab">
                    <span class="uba-nav-wp-icon">üìä</span>
                    <span>Insights Lab</span>
                  </a>
                </li>
                <li class="uba-nav-wp-item">
                  <a class="uba-nav-wp-btn" href="help.html" data-title="Success Desk">
                    <span class="uba-nav-wp-icon">üí¨</span>
                    <span>Success Desk</span>
                  </a>
                </li>
                <li class="uba-nav-wp-item">
                  <button class="uba-nav-wp-btn" data-section="settings" data-title="Settings">
                    <span class="uba-nav-wp-icon">üõ†Ô∏è</span>
                    <span>Settings</span>
                  </button>
                </li>
              </ul>
            </nav>
          </aside>

          <!-- Main -->
          <main class="uba-main">
            <!-- Top bar -->
            <header class="uba-topbar">
              <div class="uba-top-left">
                <p class="uba-top-kicker" data-i18n="top.kicker">Workspace</p>
                <h1 id="uba-view-title" data-i18n="view.dashboard.title">
                  Business overview
                </h1>
                <p id="uba-view-desc" data-i18n="view.dashboard.desc">
                  Today's snapshot across your clients, invoices, tasks and
                  automations.
                </p>
              </div>
              <div class="uba-top-right">
                <div class="uba-language" aria-label="Language switcher">
                  <label for="language-select-top" data-i18n="language.label"
                    >Language</label
                  >
                  <select id="language-select-top" class="uba-select">
                    <option value="en" data-i18n="language.en">English</option>
                    <option value="ar" data-i18n="language.ar">Arabic</option>
                    <option value="nl" data-i18n="language.nl">Dutch</option>
                    <option value="fr" data-i18n="language.fr">French</option>
                    <option value="es" data-i18n="language.es">Spanish</option>
                    <option value="de" data-i18n="language.de">German</option>
                  </select>
                </div>
                <select class="uba-select" id="workspace-select">
                  <option>Main workspace</option>
                  <option>Client projects</option>
                  <option>Internal tools</option>
                </select>
                <div class="uba-user-pill">
                  <span class="uba-avatar"></span>
                  <span id="uba-user-label">Admin</span>
                  <button
                    onclick="logout()"
                    class="uba-logout-btn"
                    title="Logout"
                    style="all: unset; cursor: pointer; font-size: 16px"
                  >
                    üö™
                  </button>
                </div>
              </div>
            </header>

            <div class="uba-views">
              <!-- DASHBOARD VIEW -->
              <section class="uba-view" data-view="dashboard">
                <div class="uba-demo-banner" id="demo-banner" hidden>
                  <div>
                    <p class="uba-banner-label" data-i18n="demo.label">
                      Live preview
                    </p>
                    <h2 data-i18n="demo.title">Board ready for handoff</h2>
                    <p data-i18n="demo.desc">
                      Explore a pre-filled workspace with KPIs, pipeline, and
                      mini-invoices. Connect your Supabase keys later to sync
                      real data.
                    </p>
                  </div>
                  <div class="uba-banner-actions">
                    <button
                      class="uba-btn-primary"
                      onclick="window.location.href='login.html'"
                      data-i18n="demo.ctaPrimary"
                    >
                      Connect account
                    </button>
                    <button
                      class="uba-btn-ghost"
                      onclick="window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' })"
                      data-i18n="demo.ctaSecondary"
                    >
                      Explore layout
                    </button>
                  </div>
                </div>

                <div class="uba-grid">
                  <div class="uba-grid-col">
                    <!-- Key metrics -->
                    <section class="uba-card" id="card-metrics">
                      <div class="uba-card-header">
                        <div>
                          <div
                            class="uba-card-title"
                            data-i18n="card.metrics.title"
                          >
                            Key metrics
                          </div>
                          <p class="uba-card-sub" data-i18n="card.metrics.desc">
                            Quick view of revenue, open invoices and current
                            workload.
                          </p>
                        </div>
                        <span class="uba-pill" data-i18n="card.metrics.range"
                          >Last 30 days</span
                        >
                      </div>

                      <div class="uba-kpi-strip">
                        <div class="uba-kpi">
                          <div
                            class="uba-kpi-label"
                            data-i18n="kpi.billed.label"
                          >
                            Billed (30d)
                          </div>
                          <div class="uba-kpi-value" id="kpi-billed">‚Ç¨ 0</div>
                          <div
                            class="uba-kpi-trend"
                            id="kpi-billed-trend"
                            data-i18n="kpi.billed.trend"
                          >
                            Based on paid invoices
                          </div>
                        </div>

                        <div class="uba-kpi">
                          <div
                            class="uba-kpi-label"
                            data-i18n="kpi.openInvoices.label"
                          >
                            Open invoices
                          </div>
                          <div class="uba-kpi-value" id="kpi-open-invoices">
                            ‚Ç¨ 0
                          </div>
                          <div
                            class="uba-kpi-trend"
                            id="kpi-open-invoices-trend"
                            data-i18n="kpi.openInvoices.trend"
                          >
                            Sent & overdue
                          </div>
                        </div>

                        <div class="uba-kpi">
                          <div
                            class="uba-kpi-label"
                            data-i18n="kpi.clients.label"
                          >
                            Active clients
                          </div>
                          <div class="uba-kpi-value" id="kpi-active-clients">
                            0
                          </div>
                          <div
                            class="uba-kpi-trend"
                            id="kpi-active-clients-trend"
                            data-i18n="kpi.clients.trend"
                          >
                            From Supabase CRM
                          </div>
                        </div>

                        <div class="uba-kpi">
                          <div
                            class="uba-kpi-label"
                            data-i18n="kpi.tasks.label"
                          >
                            Tasks today
                          </div>
                          <div class="uba-kpi-value" id="kpi-tasks-today">
                            ‚Äî
                          </div>
                          <div
                            class="uba-kpi-trend"
                            id="kpi-tasks-today-trend"
                            data-i18n="kpi.tasks.trend"
                          >
                            Linked to projects
                          </div>
                        </div>
                      </div>
                    </section>

                    <!-- Recent invoices -->
                    <section class="uba-card" id="card-mini-invoices">
                      <div class="uba-card-header">
                        <div>
                          <div
                            class="uba-card-title"
                            data-i18n="card.miniInvoices.title"
                          >
                            Recent invoices
                          </div>
                          <p
                            class="uba-card-sub"
                            data-i18n="card.miniInvoices.desc"
                          >
                            Latest activity including drafts and sent invoices.
                          </p>
                        </div>
                        <button
                          class="uba-btn-ghost uba-btn-sm"
                          onclick="window.showView('invoices')"
                          data-i18n="card.miniInvoices.cta"
                        >
                          View all
                        </button>
                      </div>

                      <div class="uba-list" id="mini-invoices-list">
                        <!-- Dynamic content loaded here -->
                      </div>
                    </section>
                  </div>

                  <div class="uba-grid-col">
                    <!-- Project pipeline -->
                    <section class="uba-card" id="card-pipeline">
                      <div class="uba-card-header">
                        <div>
                          <div
                            class="uba-card-title"
                            data-i18n="card.pipeline.title"
                          >
                            Project pipeline
                          </div>
                          <p
                            class="uba-card-sub"
                            data-i18n="card.pipeline.desc"
                          >
                            Live view of leads, active projects and ongoing
                            collaborations.
                          </p>
                        </div>
                        <button
                          class="uba-btn-ghost uba-btn-sm"
                          onclick="window.showView('projects')"
                          data-i18n="card.pipeline.cta"
                        >
                          Manage
                        </button>
                      </div>

                      <div class="uba-stages" id="pipeline-stages">
                        <!-- Dynamic stages loaded here -->
                      </div>
                    </section>

                    <!-- Recent activity -->
                    <section class="uba-card" id="card-tasks">
                      <div class="uba-card-header">
                        <div>
                          <div
                            class="uba-card-title"
                            data-i18n="card.tasks.title"
                          >
                            Active tasks
                          </div>
                          <p class="uba-card-sub" data-i18n="card.tasks.desc">
                            Today's priorities and upcoming deliverables.
                          </p>
                        </div>
                        <button
                          class="uba-btn-ghost uba-btn-sm"
                          onclick="window.showView('tasks')"
                          data-i18n="card.tasks.cta"
                        >
                          View all
                        </button>
                      </div>

                      <div class="uba-list" id="mini-tasks-list">
                        <!-- Dynamic content loaded here -->
                      </div>
                    </section>
                  </div>
                </div>
              </section>

              <!-- CLIENTS VIEW -->
              <section class="uba-view" data-view="clients" hidden>
                <div class="uba-section-header">
                  <h2 data-i18n="view.clients.title">Clients</h2>
                  <p data-i18n="view.clients.desc">
                    Manage your client relationships and contact information.
                  </p>
                </div>

                <div class="uba-list" id="clients-list">
                  <!-- Dynamic content loaded here -->
                </div>
              </section>

              <!-- PROJECTS VIEW -->
              <section class="uba-view" data-view="projects" hidden>
                <div class="uba-section-header">
                  <h2 data-i18n="view.projects.title">Projects</h2>
                  <p data-i18n="view.projects.desc">
                    Track project progress and manage deliverables.
                  </p>
                </div>

                <div class="uba-kanban" id="projects-board">
                  <!-- Dynamic content loaded here -->
                </div>
              </section>

              <!-- TASKS VIEW -->
              <section class="uba-view" data-view="tasks" hidden>
                <div class="uba-section-header">
                  <h2 data-i18n="view.tasks.title">Tasks</h2>
                  <p data-i18n="view.tasks.desc">
                    Organize and prioritize your daily tasks.
                  </p>
                </div>

                <div class="uba-list" id="tasks-list">
                  <!-- Dynamic content loaded here -->
                </div>
              </section>

              <!-- INVOICES VIEW -->
              <section class="uba-view" data-view="invoices" hidden>
                <div class="uba-section-header">
                  <h2 data-i18n="view.invoices.title">Invoices</h2>
                  <p data-i18n="view.invoices.desc">
                    Create and manage your invoices and payments.
                  </p>
                </div>

                <div class="uba-list" id="invoices-list">
                  <!-- Dynamic content loaded here -->
                </div>
              </section>

              <!-- AUTOMATIONS VIEW -->
              <section class="uba-view" data-view="automations" hidden>
                <div class="uba-section-header">
                  <h2 data-i18n="view.automations.title">Automations</h2>
                  <p data-i18n="view.automations.desc">
                    Set up automated workflows and business processes.
                  </p>
                </div>

                <div class="uba-grid">
                  <div class="uba-card">
                    <h3 data-i18n="automations.emailReminders">
                      Email Reminders
                    </h3>
                    <p data-i18n="automations.emailReminders.desc">
                      Automatically send follow-up emails for overdue invoices.
                    </p>
                  </div>
                  <div class="uba-card">
                    <h3 data-i18n="automations.taskAssignment">
                      Task Assignment
                    </h3>
                    <p data-i18n="automations.taskAssignment.desc">
                      Auto-assign tasks based on project type and client.
                    </p>
                  </div>
                </div>
              </section>

              <!-- SETTINGS VIEW -->
              <section class="uba-view" data-view="settings" hidden>
                <div class="uba-section-header">
                  <h2 data-i18n="view.settings.title">Settings</h2>
                  <p data-i18n="view.settings.desc">
                    Configure your workspace and preferences.
                  </p>
                </div>

                <div class="uba-settings">
                  <div class="uba-card">
                    <h3 data-i18n="settings.profile">Profile Settings</h3>
                    <p data-i18n="settings.profile.desc">
                      Update your personal information and preferences.
                    </p>
                  </div>
                  <div class="uba-card">
                    <h3 data-i18n="settings.billing">Billing & Payments</h3>
                    <p data-i18n="settings.billing.desc">
                      Manage your subscription and payment methods.
                    </p>
                  </div>
                  <div class="uba-card">
                    <h3 data-i18n="settings.integrations">Integrations</h3>
                    <p data-i18n="settings.integrations.desc">
                      Connect third-party services and APIs.
                    </p>
                  </div>
                </div>
              </section>
            </div>
          </main>
        </div>
      </div>
    </section>

    <script src="assets/js/i18n.js"></script>
    <script src="assets/js/store.js"></script>
    <script src="assets/js/app.js"></script>
    <script src="assets/js/page-loader.js"></script>
    <script src="assets/js/assistant.js"></script>
    <script src="assets/js/clients.js"></script>
    <script src="assets/js/tasks.js"></script>
    <script src="assets/js/smarttools.js"></script>
    <script>
      try {
        const pageId = document.getElementById("page-id")?.dataset?.page;
        if (pageId && typeof loadPageScripts === "function")
          loadPageScripts(pageId);
      } catch (err) {
        console.warn("page-loader: failed to run loadPageScripts", err);
      }
      
      // WordPress-style sidebar navigation handler
      document.addEventListener('DOMContentLoaded', function() {
        const navButtons = document.querySelectorAll('.uba-nav-wp-btn');
        
        navButtons.forEach(button => {
          button.addEventListener('click', function(e) {
            // Only handle data-section buttons (SPA navigation)
            if (this.hasAttribute('data-section')) {
              e.preventDefault();
              
              // Remove active class from all buttons
              navButtons.forEach(btn => btn.classList.remove('active'));
              
              // Add active class to clicked button
              this.classList.add('active');
              
              // Trigger existing SPA navigation if available
              const section = this.getAttribute('data-section');
              if (typeof window.showView === 'function') {
                window.showView(section);
              }
            }
            // For anchor links, let them navigate naturally
          });
        });
      });
    </script>
  </body>
</html>